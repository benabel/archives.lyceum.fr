{"componentChunkName":"component---src-templates-cours-md-js","path":"/tg/nsi/2-bases-de-donnees/3-langage-sql","result":{"data":{"markdownRemark":{"html":"<details class=\"programme\"><summary>Programme Officiel</summary><div><table class=\"table table-bordered table-hover\"><thead class=\"table-warning\"><tr><th colspan=\"1\" rowspan=\"1\"><p>Contenus</p></th><th colspan=\"1\" rowspan=\"1\"><p>Capacités attendues</p></th><th colspan=\"1\" rowspan=\"1\"><p>Commentaires</p></th></tr></thead><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>Langage SQL :\nrequêtes d’interrogation\net de mise à jour d’une\nbase de données.</p></td><td colspan=\"1\" rowspan=\"1\"><p>Identifier les composants d’une\nrequête.</p><p>Construire des requêtes\nd’interrogation à l’aide des\nclauses du langage SQL :\n<code class=\"language-text\">SELECT</code>, <code class=\"language-text\">FROM</code>, <code class=\"language-text\">WHERE</code>, <code class=\"language-text\">JOIN</code>.</p><p>Construire des requêtes\nd’insertion et de mise à jour à\nl’aide de : <code class=\"language-text\">UPDATE</code>, <code class=\"language-text\">INSERT</code>,\n<code class=\"language-text\">DELETE</code>.</p></td><td colspan=\"1\" rowspan=\"1\"><p>On peut utiliser <code class=\"language-text\">DISTINCT</code>,\n<code class=\"language-text\">ORDER BY</code> ou les fonctions\nd’agrégation sans utiliser les\nclauses <code class=\"language-text\">GROUP BY</code> et <code class=\"language-text\">HAVING</code>.</p></td></tr></tbody></table></div><a class=\"lien-programme\" href=\"../programme/\">Lien vers le programme complet</a></details>\n<!-- A VOIR https://fr.wikipedia.org/wiki/Alg%C3%A8bre_relationnelle pour les fondements algébriques du sql \n\nTODO étudier le passage par notebook XEUS-SQLITE pour avoir des belles sorties\n\nou simplement passer le cours en interactif avec binder -->\n<blockquote>\n<p>Maintenant que nous avons vu comment étaient organisées les bases de données, et comment elles\nétaient maintenues conformes, nous allons interagir avec elles en utilisant le langage\n<code class=\"language-text\">SQL</code>(<em>Structured Query Language</em>) pour interroger ou écrire dans une base de données.</p>\n</blockquote>\n<p>Dans ce cours nous allons utiliser le SGBD <code class=\"language-text\">sqlite3</code> qui permet de stocker des petites bases de\ndonnées dans des fichiers.</p>\n<p>Il existe de nombreuses façons d'écrire des requêtes SQL avec une base de données <code class=\"language-text\">sqlite</code>:</p>\n<ul>\n<li>En interface graphique avec <a href=\"https://sqlitebrowser.org/\">sqlitebrowser</a>,</li>\n<li>En console, en lançant: <code class=\"language-text\">sqlite3 nom_de_ma_bdd.db</code>.</li>\n<li>Via un langage de programmation comme Python grâce au module <a href=\"https://docs.python.org/3/library/sqlite3.html\"><code class=\"language-text\">sqlite3</code></a></li>\n</ul>\n<p>Pour illustrer ce cours, nous allons étudier des données situées dans un dépôt\n<a href=\"https://framagit.org/lyceum/binder-sqlite\">framagit</a> via un environnement jupyterlab en ligne\n<a href=\"https://mybinder.org/v2/git/https%3A%2F%2Fframagit.org%2Flyceum%2Fbinder-sqlite/main?urlpath=lab\"><img src=\"https://mybinder.org/badge_logo.svg\" alt=\"Binder\"></a>.</p>\n<h2 id=\"le-langage-sql\" style=\"position:relative;\"><a href=\"#le-langage-sql\" aria-label=\"le langage sql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le langage SQL</h2>\n<p>Les instructions SQL s'écrivent d'une manière qui ressemble à celle de phrases ordinaires en\nanglais. C'est un langage <strong>déclaratif</strong> c'est-à-dire qu'il permet de décrire le résultat escompté,\nsans décrire la manière de l'obtenir.</p>\n<p>Le langage <code class=\"language-text\">SQL</code> n'est pas sensible à la casse, mais a l'<em>habitude d'écrire les instructions en\nmajuscules</em>, on peut écrire les instructions sur plusieurs lignes avec ou sans indentation et\nchaque instruction doit être terminée par un <em>point-virgule</em>.</p>\n<p>Nous verrons cette année les instructions de manipulation du contenu de la base de données qui\ncommencent par les mots clés:</p>\n<ul>\n<li><code class=\"language-text\">SELECT</code>: recherche de contenu;</li>\n<li><code class=\"language-text\">UPDATE</code>: modification,</li>\n<li><code class=\"language-text\">INSERT</code>: ajout,</li>\n<li><code class=\"language-text\">DELETE</code> suppression.</li>\n</ul>\n<div class=\"example\"><p>Étudions dans la console les tables contenues dans la base de données <code class=\"language-text\">./peintures/peinture.db</code>.\nDont le schéma est le suivant:</p><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 503px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/2020-2021/static/3178082d233af4439f8a15cb03a20913/a4078/peinture-diag.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVQoz6WTwa6qMBRF7///kQNHioKGCRDSIBaoYACx0AqU0trzEjHPiXmD+/a0WV0nJ/v8wH/kBwCGYeCcM8bu9zullDHW9z3nXCkFANM0SSm11uYVpdQ0TVrrN9w0jVIqDMPD4bDf7w+HA+d84adpejweQojz+ez7fhAETdOM49h13RvO8xwhtNvt1us1xngcx2EYGGOPx6PrutvtdrlcHMdBCIVhWNf1MAxVVb3hsiwxxq7r2rYNAMYYAFBKDcMwjiMhxPd927allMur1vpjrqrqdDqlaer7/iIHgHmeKaVFURBCiqKwLCvPcwB4Pp/GGMbYx5wkSRRFhJDj8bharTzPM8bc73dCSJIkhJDNZlMUxd+5PvDtdouiCL+CEHIch1JqjFlWFcdxkiRBEGCMGWNlWWZZRil9w3Vdx3F8Pp9Pp5PneWEYzvPMORdC9H2PMV78CKE0TR3HcV2Xc/6GtdZSynmepZRKqXmehRDjOAIA5zyOY4xxlmUYY8dx8jzXWn/gf0QIQV5J0zSKIsuyhBAA0LbtF3jZR9/3nucFQYAQ2m631+uVMUYpbduWc9513fLFd7OUsq7rpmmWwi5l/N7tXx/GHxr+EpQvD9P9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Schéma relationnel de la bdd peinture.db\"\n        title=\"Schéma relationnel de la bdd peinture.db\"\n        src=\"/2020-2021/static/3178082d233af4439f8a15cb03a20913/a4078/peinture-diag.png\"\n        srcset=\"/2020-2021/static/3178082d233af4439f8a15cb03a20913/8514f/peinture-diag.png 192w,\n/2020-2021/static/3178082d233af4439f8a15cb03a20913/804b2/peinture-diag.png 384w,\n/2020-2021/static/3178082d233af4439f8a15cb03a20913/a4078/peinture-diag.png 503w\"\n        sizes=\"(max-width: 503px) 100vw, 503px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p><p>On commence par lancer la console <code class=\"language-text\">sqlite</code> sur la base:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">sqlite3 peintures/peinture.db</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div><p>Maintenant dans la console <code class=\"language-text\">sqlite</code>, on peut interagir avec le bdd, par exemple en listant les\ntables.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\">sqlite<span class=\"token operator\">></span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">tables</span>\npeintres   peintures</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div><p>L'invite de commandes est prête à recevoir nos commandes SQL, on va voir maintenant quatre de ces commandes.</p></div>\n<details class=\"plus\" data-titre=\"Affichage des noms de colonnes\"><summary>Affichage des noms de colonnes</summary><p>Pour plus de clarté, on peut également ajouter le nom des colonnes lors des renvois.</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">sqlite<span class=\"token operator\">></span> .headers on</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div></details>\n<h2 id=\"construire-des-requêtes-dinterrogation\" style=\"position:relative;\"><a href=\"#construire-des-requ%C3%AAtes-dinterrogation\" aria-label=\"construire des requêtes dinterrogation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Construire des requêtes d'interrogation</h2>\n<p>Pour afficher tous les enregistrements d'une table on utilise:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> tablename<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"examples\"><p>On va commencer par afficher toutes les entrées de:</p><ul>\n<li>La table <code class=\"language-text\">peintres</code>: <code class=\"language-text\">SELECT * FROM peintres;</code>,</li>\n<li>puis <code class=\"language-text\">peintures</code>: <code class=\"language-text\">SELECT * FROM peintures;</code>.</li>\n</ul><p>On peut limiter le nombre de lignes affichées avec <code class=\"language-text\">LIMIT</code>, par exemple pour n'afficher que trois\nenregistrements de la sélection: <code class=\"language-text\">SELECT * FROM peintres LIMIT 3;</code>,</p></div>\n<h3 id=\"choisir-les-colonnes-à-afficher-avec-select\" style=\"position:relative;\"><a href=\"#choisir-les-colonnes-%C3%A0-afficher-avec-select\" aria-label=\"choisir les colonnes à afficher avec select permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choisir les colonnes à afficher avec <code class=\"language-text\">SELECT</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> col1<span class=\"token punctuation\">,</span> col2 <span class=\"token keyword\">FROM</span> tablename<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Il peut être nécessaire de connaitre le nom des colonnes avec: <code class=\"language-text\">PRAGMA table_info(peintres);</code></p>\n<div class=\"example\"><p>On va récupérer le nom et le sexe du peintre:</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> nom<span class=\"token punctuation\">,</span> sexe <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div></div>\n<h3 id=\"restreindre-les-lignes-avec-where\" style=\"position:relative;\"><a href=\"#restreindre-les-lignes-avec-where\" aria-label=\"restreindre les lignes avec where permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restreindre les lignes avec <code class=\"language-text\">WHERE</code></h3>\n<p>On sélectionne les tableaux peints en 1503.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> peintures <span class=\"token keyword\">WHERE</span> annee<span class=\"token operator\">=</span><span class=\"token string\">\"1503\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"jointure-de-deux-tables-avec-join\" style=\"position:relative;\"><a href=\"#jointure-de-deux-tables-avec-join\" aria-label=\"jointure de deux tables avec join permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jointure de deux tables avec <code class=\"language-text\">JOIN</code></h3>\n<p>Dans cette base de données, les informations sur les peintres et sur les peintures ont été\nséparées, ce qui est bien pour éviter la redondance et les risques d'anomalies.</p>\n<p>La jointure permet d'utiliser les clés secondaires pour aller rechercher les données dans la table\nétrangère si besoin.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2 <span class=\"token keyword\">FROM</span> table1\n<span class=\"token keyword\">JOIN</span> table2 <span class=\"token keyword\">ON</span> table1<span class=\"token punctuation\">.</span>attribut <span class=\"token operator\">=</span> table2<span class=\"token punctuation\">.</span>attribut</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\"><p>Par exemple, la requête: <code class=\"language-text\">SELECT * FROM peintures WHERE titre=&quot;La Joconde&quot;;</code></p><p>renvoie:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">12418|La Joconde|1503|762|Haute Renaissance|http://commons.wikimedia.org/wiki/Special:FilePath/Mona%20Lisa%2C%20by%20Leonardo%20da%20Vinci%2C%20from%20C2RMF%20retouched.jpg</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div><p>Ainsi le peintre est identifié par son id <code class=\"language-text\">762</code>, c'est bien pour la base de données mais pas pour\nl'utilisateur qui veut connaitre le nom du peintre.</p><p>Il va falloir aller chercher cette information dans la deuxième table: <code class=\"language-text\">peintres</code> et faire une\njointure pour afficher toutes les informations souhaitées.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> titre<span class=\"token punctuation\">,</span> annee<span class=\"token punctuation\">,</span> nom<span class=\"token punctuation\">,</span> pays<span class=\"token punctuation\">,</span> date_naissance<span class=\"token punctuation\">,</span> date_mort <span class=\"token keyword\">FROM</span> peintures \n<span class=\"token keyword\">JOIN</span> peintres <span class=\"token keyword\">ON</span> peintures<span class=\"token punctuation\">.</span>id_peintre<span class=\"token operator\">=</span>peintres<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">WHERE</span> titre<span class=\"token operator\">=</span><span class=\"token string\">\"La Joconde\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div><p>Qui renvoie:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">La Joconde\t|\t1503\t|\tLéonard de Vinci\t|\tRépublique florentine\t|\t1452-04-24T00:00:00Z\t|\t1519-05-12T00:00:00Z</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div><p>Comme vous le voyez il est possible ou nécessaire de préciser d'où vient la colonne sélectionnée\navec une notation pointée comme: <code class=\"language-text\">peintures.id</code> de la forme <code class=\"language-text\">nom_de_la_table.nom_de_la_colonne</code></p></div>\n<details class=\"plus\" data-titre=\"DISTINCT ORDER BY et GROUP BY\"><summary>DISTINCT ORDER BY et GROUP BY</summary><p>Voici deux instructions supplémentaires qui peuvent être utiles:</p><ul>\n<li>\n<p><code class=\"language-text\">DISTINCT</code>: Ne pas renvoyer les doublons.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> ma_colonne\n<span class=\"token keyword\">FROM</span> nom_du_tableau<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">`</span><span class=\"token punctuation\">`</span>  <span class=\"token punctuation\">`</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul><p>Cette requête sélectionne le champ <code class=\"language-text\">ma_colonne</code> de la table <code class=\"language-text\">nom_du_tableau</code> en évitant de\nretourner des doublons.</p><ul>\n<li>\n<p><code class=\"language-text\">ORDER BY</code>: Permet d'ordonner les résultats selon la colonne de votre choix.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">table</span>\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> colonne1 <span class=\"token punctuation\">[</span><span class=\"token keyword\">ASC</span><span class=\"token operator\">|</span><span class=\"token keyword\">DESC</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Cette requête sélectionne les champs <code class=\"language-text\">colonne1</code> et <code class=\"language-text\">colonne2</code> de la table <code class=\"language-text\">table</code> et classe la sélection par ordre croissant sur la <code class=\"language-text\">colonne1</code>.</p>\n</li>\n<li>\n<p><code class=\"language-text\">GROUP BY</code>: grouper plusieurs résultats et utiliser une fonction(<code class=\"language-text\">SUM</code>, <code class=\"language-text\">AVG</code>, <code class=\"language-text\">COUNT</code>, <code class=\"language-text\">MAX</code>, <code class=\"language-text\">MIN</code>) de totaux sur un groupe de résultat. </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">table</span>\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> colonne1<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"example\"><p>On regroupe les peintres par pays en comptant le nombre de peintres par pays.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> pays<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>pays<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> peintres\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> pays\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>pays<span class=\"token punctuation\">)</span> <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div></div>\n</li>\n</ul></details>\n<h2 id=\"construire-des-requêtes-dinsertion-et-de-mise-à-jour\" style=\"position:relative;\"><a href=\"#construire-des-requ%C3%AAtes-dinsertion-et-de-mise-%C3%A0-jour\" aria-label=\"construire des requêtes dinsertion et de mise à jour permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Construire des requêtes d'insertion et de mise à jour</h2>\n<h3 id=\"ajouter-des-entrées-avec-insert\" style=\"position:relative;\"><a href=\"#ajouter-des-entr%C3%A9es-avec-insert\" aria-label=\"ajouter des entrées avec insert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ajouter des entrées avec <code class=\"language-text\">INSERT</code></h3>\n<p>Grâce au SQL, nous pouvons aussi ajouter des informations dans une table avec la commande <code class=\"language-text\">INSERT\nINTO</code>. Pour ce faire, il faut indiquer la table dans laquelle on souhaite intégrer une ligne ainsi\nque la liste des champs pour lesquels on spécifie une valeur, et enfin la liste des valeurs\ncorrespondantes.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> table1 <span class=\"token keyword\">VALUES</span>\n<span class=\"token punctuation\">(</span>val1<span class=\"token punctuation\">,</span> val2 <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> valN<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\"><p>Ajout d'un tableau La Joconde 2.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> peintures <span class=\"token keyword\">VALUES</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">124181</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"La Joconde 2 Le retour\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1504</span><span class=\"token punctuation\">,</span> <span class=\"token number\">762</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Haute Renaissance\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div></div>\n<h3 id=\"mettre-à-jour-des-informations-avec-update\" style=\"position:relative;\"><a href=\"#mettre-%C3%A0-jour-des-informations-avec-update\" aria-label=\"mettre à jour des informations avec update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mettre à jour des informations avec <code class=\"language-text\">UPDATE</code></h3>\n<p>On peut modifier certains champs d'enregistrements existants grâce au mot-clé <code class=\"language-text\">UPDATE</code> : cette\ninstruction permet de mettre à jour plusieurs champs de plusieurs enregistrements d'une table, à\npartir des expressions qui lui sont fournies.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> table1 <span class=\"token keyword\">SET</span> col1<span class=\"token operator\">=</span>val1\n<span class=\"token keyword\">WHERE</span> coli<span class=\"token operator\">=</span><span class=\"token string\">\"valeur\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\"><p>Mise à jour de la Joconde 2.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> peintures <span class=\"token keyword\">SET</span> annee<span class=\"token operator\">=</span><span class=\"token number\">1505</span>  <span class=\"token keyword\">WHERE</span> id<span class=\"token operator\">=</span><span class=\"token number\">124181</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div><p>On peut vérifier la mise à jour avec: <code class=\"language-text\">SELECT * FROM peintures WHERE id=124181;</code></p></div>\n<h3 id=\"supprimer-des-entrées-avec-delete\" style=\"position:relative;\"><a href=\"#supprimer-des-entr%C3%A9es-avec-delete\" aria-label=\"supprimer des entrées avec delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Supprimer des entrées avec <code class=\"language-text\">DELETE</code></h3>\n<p>Il se peut que l'on soit amené à supprimer un ou plusieurs enregistrements d'une table, il existe\npour cela l'instruction <code class=\"language-text\">DELETE FROM</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> table1\n<span class=\"token keyword\">WHERE</span> coli<span class=\"token operator\">=</span><span class=\"token string\">\"valeur\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\"><p>On va supprimer la Joconde 2.</p><div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> peintures <span class=\"token keyword\">WHERE</span> id<span class=\"token operator\">=</span><span class=\"token number\">124181</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div><p>On peut vérifier la suppression avec: <code class=\"language-text\">SELECT * FROM peintures WHERE id=124181;</code></p></div>\n<div class=\"ref\"><ul>\n<li><a href=\"https://openclassrooms.com/fr/courses/993975-apprenez-a-programmer-en-vb-net/992711-introduction-au-langage-sql\">Cours OpenClassRoom de Thomas Martinet sous licence\nCC-BY-NC-SA</a></li>\n</ul></div>","tableOfContents":"<ul>\n<li><a href=\"#le-langage-sql\">Le langage SQL</a></li>\n<li>\n<p><a href=\"#construire-des-requ%C3%AAtes-dinterrogation\">Construire des requêtes d'interrogation</a></p>\n<ul>\n<li><a href=\"#choisir-les-colonnes-%C3%A0-afficher-avec-select\">Choisir les colonnes à afficher avec <code class=\"language-text\">SELECT</code></a></li>\n<li><a href=\"#restreindre-les-lignes-avec-where\">Restreindre les lignes avec <code class=\"language-text\">WHERE</code></a></li>\n<li><a href=\"#jointure-de-deux-tables-avec-join\">Jointure de deux tables avec <code class=\"language-text\">JOIN</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#construire-des-requ%C3%AAtes-dinsertion-et-de-mise-%C3%A0-jour\">Construire des requêtes d'insertion et de mise à jour</a></p>\n<ul>\n<li><a href=\"#ajouter-des-entr%C3%A9es-avec-insert\">Ajouter des entrées avec <code class=\"language-text\">INSERT</code></a></li>\n<li><a href=\"#mettre-%C3%A0-jour-des-informations-avec-update\">Mettre à jour des informations avec <code class=\"language-text\">UPDATE</code></a></li>\n<li><a href=\"#supprimer-des-entr%C3%A9es-avec-delete\">Supprimer des entrées avec <code class=\"language-text\">DELETE</code></a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"tags":["cours","terminale","lycée","numérique et sciences informatiques","nsi"]},"fields":{"classe":"tg","chapter":"Langage SQL","matter":"nsi","nChapter":"3","part":"Bases de données","nPart":"2"}}},"pageContext":{"slug":"tg/nsi/2-bases-de-donnees/3-langage-sql","chapter":"Langage SQL"}},"staticQueryHashes":["604483588"]}