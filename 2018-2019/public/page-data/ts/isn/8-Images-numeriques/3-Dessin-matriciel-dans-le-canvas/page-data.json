{"componentChunkName":"component---src-templates-cours-md-js","path":"/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas","webpackCompilationHash":"41b6f3e30b482131442a","result":{"data":{"site":{"siteMetadata":{"title":"lyceum.fr"}},"markdownRemark":{"html":"<p>Comme nous l'avons vu <a href=\"./1-Numerisation-des-images\">précédemment</a>, il existe deux grands types de formats d'images:</p>\n<ul>\n<li>les images matricielles,</li>\n<li>et les images vectorielles.</li>\n</ul>\n<p>Ces deux types d'images peuvent être intégrées dans une page web grâce à la balise <code class=\"language-text\">&lt;img&gt;</code>, mais\nelles peuvent être aussi codées directement dans la page grâce aux balises <code class=\"language-text\">&lt;svg&gt;</code> et <code class=\"language-text\">&lt;canvas&gt;</code>.</p>\n<p>Nous nous intéressons ici au <strong>dessin matriciel</strong> dans la balise <code class=\"language-text\">canvas</code>.</p>\n<p><a title=\"By NET_Goblin ( http://netgoblin154.deviantart.com/ ) [Public domain], via Wikimedia Commons\" href=\"https://commons.wikimedia.org/wiki/File%3AHtml5_canvas_logo.png\"><img class=\"right\" width=\"256\" alt=\"Html5 canvas logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/1/1f/Html5_canvas_logo.png\"></a></p>\n<h2 id=\"comment-dessiner-dans-le-canvas\"><a href=\"#comment-dessiner-dans-le-canvas\" aria-label=\"comment dessiner dans le canvas permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comment dessiner dans le <code class=\"language-text\">canvas</code>?</h2>\n<p>La balise <code class=\"language-text\">&lt;canvas&gt;</code> qui fait partie de la spécification <strong>HTML5</strong> du <em>W3C</em> permet d'effectuer des\nrendus dynamiques d'images bitmap dans le navigateur grâce à des scripts <code class=\"language-text\">javascript</code>.</p>\n<p>Comme souvent dans les images numériques, le système de coordonnée est défini avec <strong>un axe des\nordonnées (y) orienté vers le bas</strong>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/2018-2019/static/0488f4f2e14b1608186d0f2adfdf2832/16bf3/systeme-de-coordonnees-dune-image-numerique.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 598px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77.92642140468227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQ4y61TiYqFMAz0//9QRXzeF96Kt3k7gUq3W30Lu4XQJm0nmRwGfa3zPClJEnIch6IoojiOyfd9sm2bLMuiMAzJ8zzeXdfl/fV6kWmalKYpiQUcY5omWteVZd93yvOc6rqmbdvYhns4E29gh9627WXr+56KomBQAwdcDsPAArCmaWgcR9a7rqOqqviMj7CXZXn9gY4/eMOAMP7XYsqIQCh/EbEYELkToLI31XZ3J4MaKIJqVPUsyzjpEJEinSMGRKJVzyrgsixcbQiq/AioUn7Kj87xD0CZwt1DnYPbCEX/yPTgBFHjrANQiyGLgSY9juN6DJAgCLhRMVbiTo3oNkK5sZ8o63Q4m+eZ2aBY0K8qP9G4o4w5Bhu0E9ggOK7yp1b4FPW3SQG6blJ+A6YbhjfsxOniAmArDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"système d'axes d'une image numérique\"\n        title=\"\"\n        src=\"/2018-2019/static/0488f4f2e14b1608186d0f2adfdf2832/16bf3/systeme-de-coordonnees-dune-image-numerique.png\"\n        srcset=\"/2018-2019/static/0488f4f2e14b1608186d0f2adfdf2832/72cd8/systeme-de-coordonnees-dune-image-numerique.png 192w,\n/2018-2019/static/0488f4f2e14b1608186d0f2adfdf2832/45483/systeme-de-coordonnees-dune-image-numerique.png 384w,\n/2018-2019/static/0488f4f2e14b1608186d0f2adfdf2832/16bf3/systeme-de-coordonnees-dune-image-numerique.png 598w\"\n        sizes=\"(max-width: 598px) 100vw, 598px\"\n      />\n  </span>\n  </a></p>\n<h3 id=\"code-html\"><a href=\"#code-html\" aria-label=\"code html permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code <code class=\"language-text\">html</code></h3>\n<p>Pour utiliser les zones de dessin canvas, on ajoute un élément <code class=\"language-text\">&lt;canvas&gt;</code> vide dans le corps du document avec un id afin de pouvoir le modifier à partir du javascript.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mon-canvas<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>400<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- Le texte suivant sera affiché si la balise canvas n'est pas supporté par son navigateur --></span>\n  Votre navigateur ne  supporte pas la balise HTML5 Canvas.\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"code-javascript\"><a href=\"#code-javascript\" aria-label=\"code javascript permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code <code class=\"language-text\">javascript</code></h3>\n<p>Nous allons maintenant dessiner dans ce <code class=\"language-text\">canvas</code> grâce à un script javascript qu'on intégrera comme\nn'importe quel code javascript(voir <a href=\"../3-Programmation-web/6-Ajouter-du-dynamisme-avec-javascript\">Ajouter du dynamisme avec\njavascript</a>)</p>\n<p>Pour cela, on sélectionne la balise <code class=\"language-text\">canvas</code>, puis on se place dans un contexte de\n<code class=\"language-text\">canvas</code> à deux dimensions avec la méthode <code class=\"language-text\">getContext(&#39;2d&#39;)</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// initialisation du contexte</span>\n<span class=\"token keyword\">var</span> theCanvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mon-canvas'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> context <span class=\"token operator\">=</span> theCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Un fois qu'on a récupéré le contexte, on dessine dedans avec des fonctions de dessin telles que:</p>\n<ul>\n<li><code class=\"language-text\">strokeRect</code>: pour dessiner un rectangle,</li>\n<li><code class=\"language-text\">fillRect</code>: pour colorier un rectangle,</li>\n<li><code class=\"language-text\">filltext</code>: pour écrire du texte...</li>\n</ul>\n<p>La liste complète des fonctions de dessin peut-être trouvée sur le <a href=\"https://developer.mozilla.org/fr/docs/Tutoriel_canvas\">tutoriel canvas sur\nMDN</a>.</p>\n<p>Voici par exemple quelques instructions qui permettent de dessiner un rectangle\navec écrit au milieu: <em>Bienvenue dans le monde du canvas</em>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/2018-2019/static/22a3574249771202334cb8d95c6ba074/c7805/bienvenue-dans-le-monde-du-canvas.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+ElEQVQ4y7WUzQ6CMBCE+/5nUVFQxBMKvo8BjeAPISgIeNWxu6bGGEwM4uGju0M7KUu7Ik1NVJWNopigLJtBa8mDvAQFgCuZ/4jLpoLcSbjdnJ8gD9qtoIcyBGaNqDGctbfDRw0XH+vynUZ4sobS8HQaIUlMnM+TJ2VpM1lm8VgUNi6XKb8jjfI8t1irqilrNOb5GOJ4NOH7GlarLjabHtbrLsKwj/1+iOWyI2Mdh8MQu92A5xHbrc5z4tjgOAg0RJEuN2a8frJbg1eTex/mLh7HRv2U69V5ogr9Gqv8XVM6edAR/NexadGw9ZvS+l1W3aZpp1GobnMH71w1zQnb+rQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Bienvenue dans le monde du canvas\"\n        title=\"\"\n        src=\"/2018-2019/static/22a3574249771202334cb8d95c6ba074/c7805/bienvenue-dans-le-monde-du-canvas.png\"\n        srcset=\"/2018-2019/static/22a3574249771202334cb8d95c6ba074/72cd8/bienvenue-dans-le-monde-du-canvas.png 192w,\n/2018-2019/static/22a3574249771202334cb8d95c6ba074/45483/bienvenue-dans-le-monde-du-canvas.png 384w,\n/2018-2019/static/22a3574249771202334cb8d95c6ba074/c7805/bienvenue-dans-le-monde-du-canvas.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n      />\n  </span>\n  </a></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// fond coloré</span>\ncontext<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#ffffaa'</span>\ncontext<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// texte centré</span>\ncontext<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#333333'</span>\ncontext<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token string\">'20px Serif'</span>\ncontext<span class=\"token punctuation\">.</span>textAlign <span class=\"token operator\">=</span> <span class=\"token string\">'center'</span>\ncontext<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bienvenue dans le monde du canvas'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// boite englobante</span>\ncontext<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#000000'</span>\ncontext<span class=\"token punctuation\">.</span><span class=\"token function\">strokeRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">390</span><span class=\"token punctuation\">,</span> <span class=\"token number\">290</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"exemple-interactif\"><a href=\"#exemple-interactif\" aria-label=\"exemple interactif permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exemple interactif</h3>\n<p>Vous pouvez vous familiariser avec ces méthodes dans l'exemple interactif ci-dessous.</p>\n<p><iframe src=\"https://codesandbox.io/api/v1/sandboxes/define?embed=1&parameters=N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPISQHwA6qnzMAhuhy4FGBCAVisAsvAAE6AJcAjAK4E4MujPK9UAN15xGAelHiYg9sKIwCvLXl4AnODYC87EAFUAKgDEAtAAcHjJGgsZ4fAKc3IqU6ACeFsLaegYyEOjuIETU_qn6cCEA7pkEeNkALAAM1SGREADmhNkAzLUeyZaMAIT-_jIAMjAytFi0MnDKEPo0kzCOdrxgkOR48pMQMlB2irxQEC5aOoUyqADk8AQyAA7pUzc3lI4EG3eOk9RnvLpNvLTKD79LoEABqlAIjhGqB-fwBH1QIweTxeIzu6h2Mj2ByOAAlvJJBgBWY5pOA4GLCIwFAwWISMODkRwQG7XOCOcjZNCYXAAKyKIFYxkZzNZ4SMcUSdIixCgrBAAF8ADQgbnYHD8sggKg0OgEBhGIycQ0ZVBiCD7Q7_CBfdDKLTUMa0Y1GtIfcowADCJ3SrjklHIymsNBwjRsAFFYMGCAAhBIASXQAAoAAa5VD5H1wFMASk4-g-OqdMj9Hu9ZNDNk9juwBFTACZ0LmYqhDS6ZAAReBwNAulsmsDUdAOqDPeScIu1nCQKBQADKBASsBLMhTAGIViteLwUxOa-Np9AoAAlGDkOvVJUyS8yGo39rVPNcVtGUa1kbkPWOceoScHmfzouy5-uurRgeBu6_vuBDTo6K4pvW1Q3FgMhzgsEBgJBf4wU6ACCByNKg8GfrqjhYdBh6zt4tapjGEB0LodDKCM6A6BiIzppgcj2jS2ZXohN4AIxEo-_avnEYgjHQjSjnsup7rqB5wJClAANYwAuS4jCBa61Hp1TkYpMHKY4akwKe55JkSV7WTIrQAJw3vWjlPoqKp3OQqm8GGGpwNQWqTvQyAgDC1gMJIXw3FCRD0R8mBwD2RGsag7GkoUIAqoxzg2qgDCCTg1QFRlIDxUyLKiP5iAgOGWAwEQNzLmgtCLOeGHcZsExQAkn5BtOjjFQcJGfuF8beMVRC8GgDBqrgLCkCqIrlQgwXKU4-pVe8n5QKaPL4LKMj9JQNx0MVKjQOgDCbTA21nVAw4zXtJBuSVMDHRgdDkPRy3AMqL26F2b2YL-X1aldUD-CoGCwP1VU7LQymKgqSMKkAA&query=codemirror%3D1%26forcerefresh%3D1%26hidenavigation%3D1%26view%3Dsplit\" class=\"embedded-codesandbox\"  style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe></p>\n<h2 id=\"comment-améliorer-lergonomie-du-code-avec-des-fonctions\"><a href=\"#comment-am%C3%A9liorer-lergonomie-du-code-avec-des-fonctions\" aria-label=\"comment améliorer lergonomie du code avec des fonctions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comment améliorer l'ergonomie du code avec des fonctions?</h2>\n<p>Très souvent on englobe les instructions de dessin au sein de <strong>fonctions</strong>, pour mieux\norganiser le code, le rendre plus lisible et plus ergonomique.</p>\n<p>En javascript, les fonctions se définissent à l'aide du mot-clef <code class=\"language-text\">function</code>, et sont ensuite appelées en écrivant le nom de la fonction suivies de parenthèses contenant éventuellement les arguments passés à la fonction.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Définition de la fonction</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">dessineUnCarré</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> cote<span class=\"token punctuation\">,</span> couleur</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> couleur\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> cote<span class=\"token punctuation\">,</span> cote<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// appel de la fonction avec les arguments</span>\n<span class=\"token comment\">// x = 10</span>\n<span class=\"token comment\">// y = 100</span>\n<span class=\"token comment\">// cote = 50</span>\n<span class=\"token function\">dessineUnCarré</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Voici un code <code class=\"language-text\">html</code> complet qui dessine un smiley dans le <code class=\"language-text\">canvas</code>:</p>\n<p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fr<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Dessin en canvas<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mon-canvas<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>400<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>300<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      Votre navigateur ne supporte pas la balise HTML5 Canvas.\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      <span class=\"token keyword\">var</span> theCanvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mon-canvas'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">var</span> ctx <span class=\"token operator\">=</span> theCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// background</span>\n      <span class=\"token keyword\">function</span> <span class=\"token function\">drawBackground</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#ffffaa'</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// box</span>\n        ctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#000000'</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">strokeRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">390</span><span class=\"token punctuation\">,</span> <span class=\"token number\">290</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">function</span> <span class=\"token function\">drawSmiley</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// smiley</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Tête</span>\n        ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#FFFF00'</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Colorier la tête en jaune</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Bouche</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Oeil gauche</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Oeil droit</span>\n\n        ctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// appel des fonctions pour dessiner dans le canvas</span>\n      <span class=\"token comment\">//</span>\n      <span class=\"token comment\">// On dessine le fond</span>\n      <span class=\"token function\">drawBackground</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// On dessine le smiley en passant en arguments de la fonctions</span>\n      <span class=\"token comment\">//les coordonnées x et y auxquelles on veut le dessiner</span>\n      <span class=\"token function\">drawSmiley</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div></p>\n<p><strong>RENDU</strong></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/2018-2019/static/4115ee51df4d4d8b99aa926f2a73431a/c7805/canvas-smiley.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAA9UlEQVQ4y62UvQrCQBCED/TBLHyTPFOwslAEL0YU0coilmnsBQPBUrCKKa6Qc8zceRAFf/JTfNlhdzMsudyKy2WIPB8jy0a4XuvBd+lBL0EBzAvChsyNqaA7E/d78BGtpeFbDz04reDDGQIzg9M2yoLFE/lWK/d/MHyNIW63JdLUN1B/6/05YZ5LbLd9HA4dAzVzlSfUelroDeLYw/EocDpZqJljjT1/TWgjm9fY7XrY7wWSpGugZo412xNUmzCKPEwmAkpZqJmrNGH5+yglsVr1MRh0DNTMNTplrZc4n30DdaNTrvUftn5TWr/LbtvU3TQOt20eF7UjFeatY80AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Rendu de l'élément canvas\"\n        title=\"\"\n        src=\"/2018-2019/static/4115ee51df4d4d8b99aa926f2a73431a/c7805/canvas-smiley.png\"\n        srcset=\"/2018-2019/static/4115ee51df4d4d8b99aa926f2a73431a/72cd8/canvas-smiley.png 192w,\n/2018-2019/static/4115ee51df4d4d8b99aa926f2a73431a/45483/canvas-smiley.png 384w,\n/2018-2019/static/4115ee51df4d4d8b99aa926f2a73431a/c7805/canvas-smiley.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n      />\n  </span>\n  </a></p>\n<p>Essayez modifier certains des paramètres du code pour vous familiariser avec sa syntaxe, puis ajouter des éléments en utilisant cette page de référence de <a href=\"http://www.w3schools.com/tags/ref_canvas.asp\">w3schools</a></p>\n<h2 id=\"comment-créer-des-animations\"><a href=\"#comment-cr%C3%A9er-des-animations\" aria-label=\"comment créer des animations permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comment créer des animations?</h2>\n<p>Pou animer un dessin canvas, nous allons utiliser la méthode <code class=\"language-text\">window.requestAnimationFrame()</code>, cette méthode permet d'éxecuter une fonction à chaque affichage de la fenêtre du navigateur(soit environ 60 images/seconde).</p>\n<p>On crée ainsi une fonction <code class=\"language-text\">anime()</code> qui s'appelle elle-même à chaque rafraichissement de l'affichage.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Création de la fonction</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">anime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>anime<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// Commandes de dessin</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Appel de la fonction pour lancer l'animation</span>\n<span class=\"token function\">anime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"création-dun-prototype-smiley\"><a href=\"#cr%C3%A9ation-dun-prototype-smiley\" aria-label=\"création dun prototype smiley permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Création d'un prototype <code class=\"language-text\">Smiley</code></h3>\n<p>Nous allons créer un objet <em>prototype</em> <code class=\"language-text\">Smiley</code> qui stockera à la fois des variables de coordonées, de vitesses du Smiley, mais également des <em>méthodes</em> qui lui permettent de se déplacer, de se dessiner.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Smiley</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> vx<span class=\"token punctuation\">,</span> vy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// initialisation de l'objet Smiley avec les coordonnées et vitesses</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vx <span class=\"token operator\">=</span> vx\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vy <span class=\"token operator\">=</span> vy\n    \n    <span class=\"token comment\">// méthode de dessin du smiley</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">dessineToi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// code semblable à celui vu précédemment dans la fonction drawSmiley</span>\n        <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// modifie les coordonnées du smiley pour le prochain rafrachissement</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">deplaceToi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        \n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vx\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vy\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Après initialisation du Smiley au début de l'animation, on pourra alors utiliser ce prototype la méthode deplaceToi de l'objet <code class=\"language-text\">Smiley</code> à chaque rafraichissement de la page dans la fonction <code class=\"language-text\">anime</code>.</p>\n<h3 id=\"initilisation-de-lobjet-smiley\"><a href=\"#initilisation-de-lobjet-smiley\" aria-label=\"initilisation de lobjet smiley permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initilisation de l'objet Smiley</h3>\n<p>On initialise l'objet <code class=\"language-text\">Smiley</code> au milieu de l'écran avec des vitesses aléatoires.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> smiley <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Smiley</span><span class=\"token punctuation\">(</span>\n  width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// x</span>\n  height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// y</span>\n  <span class=\"token number\">10</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// vx</span>\n  <span class=\"token number\">10</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">5</span>  <span class=\"token comment\">// vy</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"animation\"><a href=\"#animation\" aria-label=\"animation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Animation</h3>\n<p>On ajoute les instructions à la fonction <code class=\"language-text\">anime</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">anime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// On dessine le fond du canvas</span>\n  <span class=\"token function\">dessineFond</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// On déplace le smiley</span>\n  smiley<span class=\"token punctuation\">.</span><span class=\"token function\">deplaceToi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// On dessine le smiley</span>\n  smiley<span class=\"token punctuation\">.</span><span class=\"token function\">dessineToi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// On demande une nouvelle frame d'animation</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>anime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Il ne reste maintenant plus qu'à gérer les collisions avec les parois pour modifier les vitesses du\n<code class=\"language-text\">Smiley</code> en cas de rebond, c'est ce qui est fait dans la fonction <code class=\"language-text\">checkWallCollision</code>.</p>\n<h3 id=\"exemple-interactif-1\"><a href=\"#exemple-interactif-1\" aria-label=\"exemple interactif 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exemple interactif</h3>\n<p><iframe src=\"https://codesandbox.io/api/v1/sandboxes/define?embed=1&parameters=N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPAITqXkECeADjAASESAPgA6qRoKh8oAQ1QBzALwjwAJxWjxeGDPSaRBRkRgEZfcnhmq4J5SACuBMAFoAHBrEHGBCAVhCAEXg4ND46czkANxk4RgB6Hz8YfUM4clUIbgI-OFVyOzRMXAArOA14tIyszXjtXX1xACNKdE4UxnIomL4IdDsiamdO1GiykD4Ad16CPDsAVgAGBZUBGAh5QjsAFiWPVAMDADVKAlV-VBlI9Zlae1U-VH44e25uSlVaPm5u2T5GmSgEBsfAAEgAVACyABk5nwAMJdOA4TyGOLDUY1OLNVqYyRCEAAXwANCBCtgcKUyCAqDQ6AQGHE4nxDlYIDJGrA-ABHewQczvM5wN4YPgyewREYxMTRe4DVAIyVwPiKPhscj2Yw0HDyEwAUVgmoIACFOABJdAACgABnKhoirQBKTyoRl8AIQTUhahK9Di9FSyX3KboGbKvhyhWjHDBmbSqyrdaEMMRxH4NYbAhiV002hYT7yVQybh4CA8_gAJgCcfuHCwyeokZi2pMcOouYI1vL6EdztdptQvkHAKBNwg1FV8H57zYqFQAEvJyY-FdaHAbD7xXAiNAYJxqzlt7BOGHHhM-ABlQ-7i1iPiTaZ4PhM8tE28JjNPvgvt8ARgWfAAKj4CEbjwHBCwwSgiAtB0-GcPg5lfVA7z_QDgNA8C5DYaDYPguYxCdfYXSZKE5HIGBDQnaQAHI5A9UdqDEOjjBg50wHsVAODHZDmJgGC-GAN9XR_WCAHlkMwNc0H4TkwGodBVT9RE30kkJHgAMXk1iiLvV1yzEiS524WRyOkJ4rz3ZCDx3TgcEwYyZHIsFKAgbShKZABmAy-DOeQrEwHI-U5LcbL4AhKHsCx-A48M7jfKLyAAawAdQBKBWygQEvVQC0QqPQj3L4Ly-HEicpMeMzrKPN88t3Ozgmk5zXIKqzXVKzAiCw6KKtQCLIhgTL-DAQtjFVWiB06nxGKsqZIImcCYDLOACAAQQmhjUHUka-N4wiCTYjiuPHVTpM0jB-ME1qmVKmAwDARyZOoud0jkeKCFwchYCsAAlGAOAtBYiT4QHwwbVMYzwIGU0VNNEwIFrdKxRzEoLCKMDe3BIEy88uE5FUrQAYjuu7yHIK0MZwLGoF-_6QZB6GowhqGwZh7Q4YRp8sUoLAKeW1RKESmAcc4PG-EJpYJYWcmrNrHA-YFmAaY7RCEKBrYAE4QY8zW9t7Jk5M4qbkNq48eT5Zb2EFnJJyoadqHnRdsjgMwV2CGAsyZJcza-Sg1wAC4CzB7DrIg5xmFpJzeO5rbKtSYHuJdgXQIyTPjg7De4i8LItLAgc4IHIlz5dOFgy67xmIEcDrFUeasiukWPFVLPLkskULsNC7feucEiRvi671vMPQCB7CVFVFmdFvK5Ox4mrDdiM-oC630Rk2V_Md6cEaGB5DQAAFUDtLvO9ZascgLW7ovu_zhC6aBkCZhwPfTTQl8wtUewYFg10wQAK9odessqbC1FoTdS4D1JLGlsfDemNoBQH4q6DK7wIDx2kGYAg_9-DhGKGKR4gDN4DH6s5C-g86wAGoioq2voRGBp88ikMrlfQeN8PIqxBg_MCz8gb3SgDYb-TIjQRSigQ3ARCYAkMvnBPgf4gbX2kX-Whx96HnykfBH81CWEKJBuw--GFn6vzkR_L-nMSprCkH5SK2hRE4HEZIshfBKHlhBvI9RCwlEn03mfRhSIKEyM0ZXY8biga6PQo_AxQE36nE_gIsx0BVT818JPZRm9ASPGSg-MM-ErKeNwPLQWR8-D7R0mFQe9lU5zxVAvI6OVS7rykeQlU3dO45NKYExxTTB69zfMU4pYhqlG3MNoJKqVMoZSytxC0lBGjFBMHUqyEAwB8CmTMkwVc-CMD4NM2ZBAh4jzgPMmB2y1nVy2as3ZhZh6j3Xsc3Z7cAIqmcD-Hpb5FnLNuesoQ94QyPngh8y5-zDnHw-aciG0j_m6H2Tc85Pc6wPLgs8qyxS7xvJWTsnAx5NkQquQcgS0L0V92xVC1pHze6AUeYiu8yKehLLRWs48Xy2Yfj-TCgFo8gV3g-X3JlSYWXorZWUElMKyXwqeS81AxTCQkm-ElGQOoKRwGoFSHMdIqQXGMAwZiG1nB0DtIqEAJJ-rWG4gwH8OAFjmoNSASS6RMhGwYAAVWQtgCixl-DoHGvRQZ4R_QbkCp8KAnByIakpqoHAVrOpoAYGSXAkgrWVDtQgZAIBlpWHpIgEA3w8gDR6Bgckkg4LOEoLwVAVrGi8igOgBgWbyJSHLdABSMb8DEFIMSa1MAS2YE4qgpNwA22YEiEETtdByA9qpDWgazhy0YFgKoBgAA9M1AA2HAP4pUgEFpwCY04k0AG0AC6BIj0EiAA&query=codemirror%3D1%26forcerefresh%3D1%26hidenavigation%3D1%26view%3Dsplit\" class=\"embedded-codesandbox\"  style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe></p>\n<h2 id=\"concours-de-monstre-animé\"><a href=\"#concours-de-monstre-anim%C3%A9\" aria-label=\"concours de monstre animé permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Concours de monstre animé</h2>\n<p>Voici un concours proposé à ses étudiants par <a href=\"http://users.polytech.unice.fr/~buffa/\">Michel\nBuffa</a>: <strong>Animer un monstre et le rendre le plus...</strong> <em>ce\nque vous voulez</em>. Un petit exemple pour commencer.</p>\n<p><a href=\"http://jsbin.com/garagowe/14/edit\">http://jsbin.com/garagowe/14/edit</a></p>\n<p>A votre tour.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#comment-dessiner-dans-le-canvas\">Comment dessiner dans le &#x3C;code class=\"language-text\">canvas&#x3C;/code>?</a></p>\n<ul>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#code-html\">Code &#x3C;code class=\"language-text\">html&#x3C;/code></a></li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#code-javascript\">Code &#x3C;code class=\"language-text\">javascript&#x3C;/code></a></li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#exemple-interactif\">Exemple interactif</a></li>\n</ul>\n</li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#comment-am%C3%A9liorer-lergonomie-du-code-avec-des-fonctions\">Comment améliorer l'ergonomie du code avec des fonctions?</a></li>\n<li>\n<p><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#comment-cr%C3%A9er-des-animations\">Comment créer des animations?</a></p>\n<ul>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#cr%C3%A9ation-dun-prototype-smiley\">Création d'un prototype &#x3C;code class=\"language-text\">Smiley&#x3C;/code></a></li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#initilisation-de-lobjet-smiley\">Initilisation de l'objet Smiley</a></li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#animation\">Animation</a></li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#exemple-interactif-1\">Exemple interactif</a></li>\n</ul>\n</li>\n<li><a href=\"/2018-2019/ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas/#concours-de-monstre-anim%C3%A9\">Concours de monstre animé</a></li>\n</ul>","frontmatter":{"tags":["html5","canvas"]},"fields":{"classe":"ts","chapter":"Dessin matriciel dans le canvas","matter":"isn","nChapter":"3","part":"Images numériques","nPart":"8"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"ts/isn/8-Images-numeriques/3-Dessin-matriciel-dans-le-canvas","chapter":"Dessin matriciel dans le canvas"}}}