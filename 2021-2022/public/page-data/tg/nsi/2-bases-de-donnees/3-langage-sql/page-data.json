{"componentChunkName":"component---src-templates-cours-md-js","path":"/tg/nsi/2-bases-de-donnees/3-langage-sql","result":{"data":{"markdownRemark":{"html":"<details class=\"programme\">\n<summary>\nProgramme Officiel\n</summary>\n<table class=\"table table-bordered table-hover\">\n<thead class=\"table-warning\">\n<tr class=\"header\">\n<th>\nContenus\n</th>\n<th>\nCapacités attendues\n</th>\n<th>\nCommentaires\n</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>\nLangage SQL : requêtes d'interrogation et de mise à jour d'une base de\ndonnées.\n</td>\n<td>\n<p>\nIdentifier les composants d'une requête.\n</p>\n<p>\nConstruire des requêtes d'interrogation à l'aide des clauses du langage\nSQL : <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>,\n<code>JOIN</code>.\n</p>\n<p>\nConstruire des requêtes d'insertion et de mise à jour à l'aide de :\n<code>UPDATE</code>, <code>INSERT</code>, <code>DELETE</code>.\n</p>\n</td>\n<td>\nOn peut utiliser <code>DISTINCT</code>, <code>ORDER BY</code> ou les\nfonctions d'agrégation sans utiliser les clauses <code>GROUP BY</code>\net <code>HAVING</code>.\n</td>\n</tr>\n</tbody>\n</table>\n<a class=\"lien-programme\" href=\"../programme/\">Lien vers le programme\ncomplet</a>\n</details>\n<!-- A VOIR https://fr.wikipedia.org/wiki/Alg%C3%A8bre_relationnelle pour les fondements algébriques du sql \n<p>--></p>\n<div class=\"intro\">\n<p><wc-wikimage class=\"half right\" title=\"SQL_Joins.svg\"></wc-wikimage></p>\n<blockquote>\n<p>Maintenant que nous avons vu comment étaient organisées les bases de\ndonnées, et comment elles étaient maintenues conformes, nous allons\ninteragir avec elles en utilisant le langage <code class=\"language-text\">SQL</code>(<em>Structured Query\nLanguage</em>) pour interroger ou écrire dans une base de données.</p>\n</blockquote>\n</div>\n<p>Dans ce cours, nous allons utiliser le SGBD <code class=\"language-text\">sqlite3</code> qui permet de\nstocker des petites bases de données dans des fichiers.</p>\n<p>Il existe de nombreuses façons d'écrire des requêtes SQL avec une base\nde données <code class=\"language-text\">sqlite</code>:</p>\n<ul>\n<li>En interface graphique avec\n<span><a href=\"https://sqlitebrowser.org/\">sqlitebrowser</a></span>,</li>\n<li>En console, en lançant: <code class=\"language-text\">sqlite3 nom_de_ma_bdd.db</code>.</li>\n<li>Dans le navigateur grâce à\n<span><a href=\"https://github.com/sql-js/sql.js\"><code class=\"language-text\">sql.js</code></a></span> voir\n<a href=\"https://apps.lyceum.fr/sqlite\">https://apps.lyceum.fr/sqlite</a> par exemple.</li>\n<li>Via un langage de programmation comme Python grâce au module\n<span><a href=\"https://docs.python.org/3/library/sqlite3.html\"><code class=\"language-text\">sqlite3</code></a></span></li>\n</ul>\n<p>Pour illustrer ce cours, nous allons étudier des données situées dans la\nbase de données peinture de la page <a href=\"https://apps.lyceum.fr/sqlite\">https://apps.lyceum.fr/sqlite</a>.</p>\n<h2 id=\"le-langage-sql\" style=\"position:relative;\"><a href=\"#le-langage-sql\" aria-label=\"le langage sql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le langage SQL</h2>\n<p>Les instructions SQL s'écrivent d'une manière qui ressemble à celle de\nphrases ordinaires en anglais. C'est un langage <strong>déclaratif</strong>,\nc'est-à-dire qu'il permet de décrire le résultat escompté, sans décrire\nla manière de l'obtenir.</p>\n<p>Le langage <code class=\"language-text\">SQL</code> n'est pas sensible à la casse, mais a l'<em>habitude\nd'écrire les instructions en majuscules</em>, on peut écrire les\ninstructions sur plusieurs lignes avec ou sans indentation et chaque\ninstruction doit être terminée par un <em>point-virgule</em>.</p>\n<p>Nous verrons cette année les instructions de manipulation du contenu de\nla base de données qui commencent par les mots clés:</p>\n<ul>\n<li><code class=\"language-text\">SELECT</code>: recherche de contenu;</li>\n<li><code class=\"language-text\">UPDATE</code>: modification,</li>\n<li><code class=\"language-text\">INSERT</code>: ajout,</li>\n<li><code class=\"language-text\">DELETE</code> suppression.</li>\n</ul>\n<div class=\"example\">\n<p>Étudions dans la console les tables contenues dans la base de données\n<code class=\"language-text\">peintures</code>.</p>\n<p>Dont le schéma est le suivant:</p>\n<p><span><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 503px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVQoz6WTwa6qMBRF7///kQNHioKGCRDSIBaoYACx0AqU0trzEjHPiXmD+/a0WV0nJ/v8wH/kBwCGYeCcM8bu9zullDHW9z3nXCkFANM0SSm11uYVpdQ0TVrrN9w0jVIqDMPD4bDf7w+HA+d84adpejweQojz+ez7fhAETdOM49h13RvO8xwhtNvt1us1xngcx2EYGGOPx6PrutvtdrlcHMdBCIVhWNf1MAxVVb3hsiwxxq7r2rYNAMYYAFBKDcMwjiMhxPd927allMur1vpjrqrqdDqlaer7/iIHgHmeKaVFURBCiqKwLCvPcwB4Pp/GGMbYx5wkSRRFhJDj8bharTzPM8bc73dCSJIkhJDNZlMUxd+5PvDtdouiCL+CEHIch1JqjFlWFcdxkiRBEGCMGWNlWWZZRil9w3Vdx3F8Pp9Pp5PneWEYzvPMORdC9H2PMV78CKE0TR3HcV2Xc/6GtdZSynmepZRKqXmehRDjOAIA5zyOY4xxlmUYY8dx8jzXWn/gf0QIQV5J0zSKIsuyhBAA0LbtF3jZR9/3nucFQYAQ2m631+uVMUYpbduWc9513fLFd7OUsq7rpmmWwi5l/N7tXx/GHxr+EpQvD9P9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Schéma relationnel de la bdd\npeinture.db\"\n        title=\"fig:\"\n        src=\"/2021-2022/static/3178082d233af4439f8a15cb03a20913/a4078/peinture-diag.png\"\n        srcset=\"/2021-2022/static/3178082d233af4439f8a15cb03a20913/12f09/peinture-diag.png 148w,\n/2021-2022/static/3178082d233af4439f8a15cb03a20913/e4a3f/peinture-diag.png 295w,\n/2021-2022/static/3178082d233af4439f8a15cb03a20913/a4078/peinture-diag.png 503w\"\n        sizes=\"(max-width: 503px) 100vw, 503px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></span></p>\n<p>Ouvrir la page <a href=\"https://apps.lyceum.fr/sqlite\">https://apps.lyceum.fr/sqlite</a> puis sélectionner la base\nde données <code class=\"language-text\">peinture</code>.</p>\n<p>Maintenant dans l'éditeur <code class=\"language-text\">sql</code>, on peut interagir avec la bdd, par\nexemple en affichant tous les peintres de la table <code class=\"language-text\">peintres</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> peintre <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Pour exécuter une commande <code class=\"language-text\">sql</code>, vous pouvez utiliser <code class=\"language-text\">CTRL+Entrée</code>.</p>\n</div>\n<h2 id=\"construire-des-requêtes-dinterrogation\" style=\"position:relative;\"><a href=\"#construire-des-requ%C3%AAtes-dinterrogation\" aria-label=\"construire des requêtes dinterrogation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Construire des requêtes d'interrogation</h2>\n<p>Pour afficher tous les enregistrements d'une table on utilise:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> tablename<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"examples\">\n<p>On va commencer par afficher toutes les entrées de:</p>\n<ul>\n<li>La table <code class=\"language-text\">peintres</code>: <code class=\"language-text\">SELECT * FROM peintres;</code>,</li>\n<li>puis <code class=\"language-text\">peintures</code>: <code class=\"language-text\">SELECT * FROM peintures;</code>.</li>\n</ul>\n<p>On peut limiter le nombre de lignes affichées avec <code class=\"language-text\">LIMIT</code>, par exemple\npour n'afficher que trois enregistrements de la sélection:\n<code class=\"language-text\">SELECT * FROM peintres LIMIT 3;</code>,</p>\n</div>\n<h3 id=\"choisir-les-colonnes-à-afficher-avec-select\" style=\"position:relative;\"><a href=\"#choisir-les-colonnes-%C3%A0-afficher-avec-select\" aria-label=\"choisir les colonnes à afficher avec select permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choisir les colonnes à afficher avec <code class=\"language-text\">SELECT</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> col1<span class=\"token punctuation\">,</span> col2 <span class=\"token keyword\">FROM</span> tablename<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"example\">\n<p>On va récupérer le nom et le sexe du peintre:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> nom<span class=\"token punctuation\">,</span> sexe <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</div>\n<h3 id=\"restreindre-les-lignes-avec-where\" style=\"position:relative;\"><a href=\"#restreindre-les-lignes-avec-where\" aria-label=\"restreindre les lignes avec where permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restreindre les lignes avec <code class=\"language-text\">WHERE</code></h3>\n<p>On sélectionne les tableaux peints en 1503.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> peintures <span class=\"token keyword\">WHERE</span> annee<span class=\"token operator\">=</span><span class=\"token string\">\"1503\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"jointure-de-deux-tables-avec-join\" style=\"position:relative;\"><a href=\"#jointure-de-deux-tables-avec-join\" aria-label=\"jointure de deux tables avec join permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jointure de deux tables avec <code class=\"language-text\">JOIN</code></h3>\n<p>Dans cette base de données, les informations sur les peintres et sur les\npeintures ont été séparées, ce qui est bien pour éviter la redondance et\nles risques d'anomalies.</p>\n<div class=\"prop\">\n<p>La jointure permet d'utiliser les clés secondaires pour aller rechercher\nles données d'une autre table grâce à la clé étrangère.</p>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2 <span class=\"token keyword\">FROM</span> table1\n<span class=\"token keyword\">JOIN</span> table2 <span class=\"token keyword\">ON</span> table1<span class=\"token punctuation\">.</span>attribut <span class=\"token operator\">=</span> table2<span class=\"token punctuation\">.</span>attribut</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>Par exemple, la requête:\n<code class=\"language-text\">SELECT * FROM peintures WHERE titre=\"La Joconde\";</code></p>\n<p>renvoie:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">12418|La Joconde|1503|762|Haute Renaissance|http://commons.wikimedia.org/wiki/Special:FilePath/Mona%20Lisa%2C%20by%20Leonardo%20da%20Vinci%2C%20from%20C2RMF%20retouched.jpg</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ainsi le peintre est identifié par son id <code class=\"language-text\">762</code>, c'est bien pour la base\nde données, mais pas pour l'utilisateur qui veut connaitre le nom du\npeintre.</p>\n<p>Il va falloir aller chercher cette information dans la deuxième table:\n<code class=\"language-text\">peintres</code> et faire une jointure pour afficher toutes les informations\nsouhaitées.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> titre<span class=\"token punctuation\">,</span> annee<span class=\"token punctuation\">,</span> peintre<span class=\"token punctuation\">,</span> pays<span class=\"token punctuation\">,</span> date_naissance<span class=\"token punctuation\">,</span> date_mort <span class=\"token keyword\">FROM</span> peintures \n<span class=\"token keyword\">JOIN</span> peintres <span class=\"token keyword\">ON</span> peintures<span class=\"token punctuation\">.</span>id_peintre<span class=\"token operator\">=</span>peintres<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">WHERE</span> titre<span class=\"token operator\">=</span><span class=\"token string\">\"La Joconde\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Qui renvoie:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">La Joconde  |   1503    |   Léonard de Vinci    |   République florentine   |   1452-04-24T00:00:00Z    |   1519-05-12T00:00:00Z</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Comme vous le voyez il est possible ou nécessaire de préciser d'où vient\nla colonne sélectionnée avec une notation pointée comme: <code class=\"language-text\">peintures.id</code>\nde la forme <code class=\"language-text\">nom_de_la_table.nom_de_la_colonne</code></p>\n</div>\n<h3 id=\"les-clauses-distinct-order-by-et-group-by\" style=\"position:relative;\"><a href=\"#les-clauses-distinct-order-by-et-group-by\" aria-label=\"les clauses distinct order by et group by permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Les clauses <code class=\"language-text\">DISTINCT</code> <code class=\"language-text\">ORDER BY</code> et <code class=\"language-text\">GROUP BY</code></h3>\n<p>Voici deux instructions supplémentaires qui peuvent être utiles:</p>\n<ul>\n<li>\n<p><code class=\"language-text\">DISTINCT</code>: Ne pas renvoyer les doublons.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> ma_colonne\n<span class=\"token keyword\">FROM</span> nom_du_tableau<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>De nombreux peintres proviennent du même pays. Ainsi la requête\nsuivante va renvoyer des doublons.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> pays <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>On ajoute <code class=\"language-text\">DISTINCT</code> pour n'afficher que des valeurs distinctes.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> pays <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</div>\n</li>\n</ul>\n<p>Cette requête sélectionne le champ <code class=\"language-text\">ma_colonne</code> de la table\n<code class=\"language-text\">nom_du_tableau</code> en évitant de retourner des doublons.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">ORDER BY</code>: Permet d'ordonner les résultats selon la colonne de\nvotre choix.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">table</span>\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> colonne1 <span class=\"token punctuation\">[</span><span class=\"token keyword\">ASC</span><span class=\"token operator\">|</span><span class=\"token keyword\">DESC</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Cette requête sélectionne les champs <code class=\"language-text\">colonne1</code> et <code class=\"language-text\">colonne2</code> de la\ntable <code class=\"language-text\">table</code> et classe la sélection par ordre croissant sur la\n<code class=\"language-text\">colonne1</code>.</p>\n<div class=\"example\">\n<p>On classe les tableaux par date croissante.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> titre<span class=\"token punctuation\">,</span> annee\n<span class=\"token keyword\">FROM</span> peintures\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> annee<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>On ajoute <code class=\"language-text\">DISTINCT</code> pour n'afficher que des valeurs distinctes.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> pays <span class=\"token keyword\">FROM</span> peintres<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</div>\n</li>\n<li>\n<p><code class=\"language-text\">GROUP BY</code>: grouper plusieurs résultats et utiliser une fonction\nd'agrégation (<code class=\"language-text\">SUM</code>, <code class=\"language-text\">AVG</code>, <code class=\"language-text\">COUNT</code>, <code class=\"language-text\">MAX</code>, <code class=\"language-text\">MIN</code>) sur un groupe de\nrésultat.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> colonne1<span class=\"token punctuation\">,</span> colonne2\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">table</span>\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> colonne1<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>On regroupe les peintres par pays en comptant le nombre de peintres\npar pays.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> pays<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>pays<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> peintres\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> pays\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>pays<span class=\"token punctuation\">)</span> <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</div>\n</li>\n</ul>\n<h2 id=\"construire-des-requêtes-dinsertion-et-de-mise-à-jour\" style=\"position:relative;\"><a href=\"#construire-des-requ%C3%AAtes-dinsertion-et-de-mise-%C3%A0-jour\" aria-label=\"construire des requêtes dinsertion et de mise à jour permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Construire des requêtes d'insertion et de mise à jour</h2>\n<h3 id=\"ajouter-des-entrées-avec-insert\" style=\"position:relative;\"><a href=\"#ajouter-des-entr%C3%A9es-avec-insert\" aria-label=\"ajouter des entrées avec insert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ajouter des entrées avec <code class=\"language-text\">INSERT</code></h3>\n<p>Grâce au SQL, nous pouvons aussi ajouter des informations dans une table\navec la commande <code class=\"language-text\">INSERT INTO</code>. Pour ce faire, il faut indiquer la table\ndans laquelle on souhaite intégrer une ligne ainsi que la liste des\nchamps pour lesquels on spécifie une valeur, et enfin la liste des\nvaleurs correspondantes.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> table1 <span class=\"token keyword\">VALUES</span>\n<span class=\"token punctuation\">(</span>val1<span class=\"token punctuation\">,</span> val2 <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> valN<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>Ajout d'un tableau La Joconde 2.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> peintures <span class=\"token keyword\">VALUES</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">124181</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"La Joconde 2 Le retour\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1504</span><span class=\"token punctuation\">,</span> <span class=\"token number\">762</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Haute Renaissance\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</div>\n<h3 id=\"mettre-à-jour-des-informations-avec-update\" style=\"position:relative;\"><a href=\"#mettre-%C3%A0-jour-des-informations-avec-update\" aria-label=\"mettre à jour des informations avec update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mettre à jour des informations avec <code class=\"language-text\">UPDATE</code></h3>\n<p>On peut modifier certains champs d'enregistrements existants grâce au\nmot-clé <code class=\"language-text\">UPDATE</code> : cette instruction permet de mettre à jour plusieurs\nchamps de plusieurs enregistrements d'une table, à partir des\nexpressions qui lui sont fournies.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> table1 <span class=\"token keyword\">SET</span> col1<span class=\"token operator\">=</span>val1\n<span class=\"token keyword\">WHERE</span> coli<span class=\"token operator\">=</span><span class=\"token string\">\"valeur\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>Mise à jour de la Joconde 2.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> peintures <span class=\"token keyword\">SET</span> annee<span class=\"token operator\">=</span><span class=\"token number\">1505</span>  <span class=\"token keyword\">WHERE</span> id<span class=\"token operator\">=</span><span class=\"token number\">124181</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>On peut vérifier la mise à jour avec:\n<code class=\"language-text\">SELECT * FROM peintures WHERE id=124181;</code></p>\n</div>\n<h3 id=\"supprimer-des-entrées-avec-delete\" style=\"position:relative;\"><a href=\"#supprimer-des-entr%C3%A9es-avec-delete\" aria-label=\"supprimer des entrées avec delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Supprimer des entrées avec <code class=\"language-text\">DELETE</code></h3>\n<p>Il se peut que l'on soit amené à supprimer un ou plusieurs\nenregistrements d'une table, il existe pour cela l'instruction\n<code class=\"language-text\">DELETE FROM</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> table1\n<span class=\"token keyword\">WHERE</span> coli<span class=\"token operator\">=</span><span class=\"token string\">\"valeur\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"example\">\n<p>On va supprimer la Joconde 2.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> peintures <span class=\"token keyword\">WHERE</span> id<span class=\"token operator\">=</span><span class=\"token number\">124181</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>On peut vérifier la suppression avec:\n<code class=\"language-text\">SELECT * FROM peintures WHERE id=124181;</code></p>\n</div>\n<div class=\"ref\">\n<ul>\n<li><span><a href=\"https://openclassrooms.com/fr/courses/993975-apprenez-a-programmer-en-vb-net/992711-introduction-au-langage-sql\">Cours OpenClassRoom de Thomas Martinet sous licence\nCC-BY-NC-SA</a></span></li>\n</ul>\n</div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#le-langage-sql\">Le langage SQL</a></p>\n</li>\n<li>\n<p><a href=\"#construire-des-requ%C3%AAtes-dinterrogation\">Construire des requêtes d'interrogation</a></p>\n<ul>\n<li><a href=\"#choisir-les-colonnes-%C3%A0-afficher-avec-select\">Choisir les colonnes à afficher avec <code class=\"language-text\">SELECT</code></a></li>\n<li><a href=\"#restreindre-les-lignes-avec-where\">Restreindre les lignes avec <code class=\"language-text\">WHERE</code></a></li>\n<li><a href=\"#jointure-de-deux-tables-avec-join\">Jointure de deux tables avec <code class=\"language-text\">JOIN</code></a></li>\n<li><a href=\"#les-clauses-distinct-order-by-et-group-by\">Les clauses <code class=\"language-text\">DISTINCT</code> <code class=\"language-text\">ORDER BY</code> et <code class=\"language-text\">GROUP BY</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#construire-des-requ%C3%AAtes-dinsertion-et-de-mise-%C3%A0-jour\">Construire des requêtes d'insertion et de mise à jour</a></p>\n<ul>\n<li><a href=\"#ajouter-des-entr%C3%A9es-avec-insert\">Ajouter des entrées avec <code class=\"language-text\">INSERT</code></a></li>\n<li><a href=\"#mettre-%C3%A0-jour-des-informations-avec-update\">Mettre à jour des informations avec <code class=\"language-text\">UPDATE</code></a></li>\n<li><a href=\"#supprimer-des-entr%C3%A9es-avec-delete\">Supprimer des entrées avec <code class=\"language-text\">DELETE</code></a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"tags":["cours","terminale","lycée","numérique et sciences informatiques","nsi"]},"fields":{"classe":"tg","chapter":"Langage SQL","matter":"nsi","nChapter":"3","part":"Bases de données","nPart":"2"}}},"pageContext":{"slug":"tg/nsi/2-bases-de-donnees/3-langage-sql","chapter":"Langage SQL"}},"staticQueryHashes":["604483588"]}