---
tags: ["cours", "terminale", "lycée", "numérique et sciences informatiques", "nsi"]
tocHTML: '<ul><li><a href="#comment-se-frayer-un-chemin-à-travers-le-réseau" data-localhref="true">Comment se «frayer» un chemin à travers le réseau ?</a></li><li><a href="#le-protocole-tcpip" data-localhref="true">Le protocole TCP/IP</a></li><li><a href="#les-tables-de-routage" data-localhref="true">Les tables de routage</a></li><li><a href="#les-protocoles-de-routage" data-localhref="true">Les protocoles de routage</a></li><ul><li><a href="#le-protocole-rip" data-localhref="true">Le protocole <em>RIP</em></a></li><li><a href="#le-protocole-ospf" data-localhref="true">Le protocole <em>OSPF</em></a></li></ul></ul>'
---





<details class="programme"><summary>Programme Officiel</summary>
<table class="table table-bordered table-hover">
<thead class="table-warning">
<tr class="header">
<th><div class="highlight"><pre><span></span>   Contenus
</pre></div>
</th>
<th><div class="highlight"><pre><span></span>    Capacités attendues
</pre></div>
</th>
<th><div class="highlight"><pre><span></span>         Commentaires
</pre></div>
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Protocoles de routage.</td>
<td>Identifier, suivant le protocole de routage utilisé, la route empruntée par un paquet.</td>
<td><p>En mode débranché, les tables de routage étant données, on se réfère au nombre de sauts (protocole RIP) ou au coût des routes (protocole OSPF).</p>
<p>Le lien avec les algorithmes de recherche de chemin sur un graphe est mis en évidence.</p></td>
</tr>
</tbody>
</table>
<a class="lien-programme" href="../programme/">Lien vers le programme complet</a></details>

<blockquote class="blockquote">
<p>Dans ce chapitre, nous poursuivons l’étude des réseaux entamée en seconde et en première par l’étude des <strong>protocoles de routage</strong>. Nous allons voir comment l’information trouve un chemin à l’intérieur d’internet.</p>
</blockquote>
<p>On commence par une vidéo qui rappelle le vocabulaire essentiel des réseaux:</p>
<ul>
<li>Commutateur ou <em>switch</em> en anglais.</li>
<li>Réseau local (<em>LAN</em>)</li>
<li>Routeur</li>
<li>Internet (<em>WAN</em>)</li>
</ul>
<p></p><div class="yt-embend"><div><iframe width="560" height="315" src="https://invidious.projectsegfau.lt/embed/JqweQE6TDTc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p><a href="https://www.youtube.com/watch?v=JqweQE6TDTc">Vidéo</a> servie sans cookie via <a href="https://projectsegfau.lt/">Project Segfault</a></p></div></div><p></p>
<p><a href="https://www.youtube.com/channel/UCKpQL4XedlNqInF6AORB90Q" class="cite-source">Mr.Techno via youtube sous licence CC-BY</a></p>
<details class="appli"><summary>&nbsp;</summary>
<p>Définir les termes cités ci-dessus.</p>
</details>

<h2 id="comment-se-frayer-un-chemin-à-travers-le-réseau" class="anchored">Comment se «frayer» un chemin à travers le réseau ?</h2>
<p>Avant d’aborder dans le détail les techniques et algorithmes utilisés, nous allons commencer par étudier un exemple pour comprendre ce qui se passe.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/DiagReseaux-pixees.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Diagramme d’un réseau</figcaption><p></p>
</figure>
</div>
<p><a href="https://pixees.fr/informatiquelycee/n_site/nsi_term_archi_routage.html" class="cite-source">David Roche via pixees.fr CC-BY-SA</a></p>
<details class="appli"><summary>&nbsp;</summary>
<ol type="1">
<li>Combien y a-t-il de réseaux locaux?</li>
<li>Quel chemin sur le réseau doit parcourir l’information pour relier deux machines d’un même réseau local comme M13 -&gt; M15?</li>
<li>Montrer qu’il existe plusieurs chemins possibles pour communiquer entre deux machines appartenant à des réseaux locaux différents comme M1 -&gt; M9.</li>
</ol>
</details>

<p>Sur cet exemple on a pu montrer qu’il existe plusieurs chemins possibles pour relier deux machines appartenant à des réseaux locaux différents. Certains seront certainement plus efficaces que d’autres, mais n’étant jamais à l’abri de problèmes techniques sur certains routeurs ou certaines liaisons, l’existence de plusieurs routes rend le réseau internet plus résilient aux pannes.</p>
<h2 id="le-protocole-tcpip" class="anchored">Le protocole TCP/IP</h2>
<p>On a vu en <a href="https://www.lyceum.fr/1g/nsi/6-architectures-materielles-et-systemes-dexploitation/5-reseaux">première</a> que la communication sur le réseau était basée sur le modèle TCP/IP à quatre couches.</p>
<p><wc-wikimage class="half center" title="Comparaison_des_modèles_OSI_et_TCP_IP.png" caption="Le modèle TCP/IP ne possède que quatre couches alors que le modèle OSI (Open System Interconnection) en a sept."></wc-wikimage></p>
<p>Dans ce protocole, on a vu en <a href="/2gt/snt/1-internet/2-les-protocoles-dinternet">seconde</a>.</p>
<ul>
<li>Le protocole IP(COUCHE RÉSEAU) qui permet d’attribuer à chaque machine une adresse IP unique pour l’identifier sur le réseau.</li>
<li>Le protocole TCP(COUCHE TRANSPORT) qui permet d’assurer la communication de l’information en la découpant en paquets, et en s’assurant que tous les paquets sont reçus et conformes à l’information envoyée.</li>
</ul>
<p>On utilise deux versions d’adresses IP.</p>
<ul>
<li>IPv4: avec des adresses de 4 octets = 32 bits.</li>
<li>IPv6: avec des adresses de 16 octets = 128 bits.</li>
</ul>
<p><wc-wikimage class="half center" title="Adresse_Ipv4.svg" caption="Avec 32 bits on ne peut avoir que 4 milliards d'adresses."></wc-wikimage></p>
<p><wc-wikimage class="half center" title="Ipv6_address-fr.svg" caption="Avec 128 bits on passe à 340 sextillons d'adresses, ça devrait suffir pour quelques temps!"></wc-wikimage></p>
<h2 id="les-tables-de-routage" class="anchored">Les tables de routage</h2>
<p>Lorsqu’un routeur reçoit un paquet celui-ci comporte une adresse IP de destination. Pour savoir dans quelle direction envoyer le paquet, chaque routeur possède une <em>table de routage</em>.</p>
<p>Une table de routage est un tableau indiquant pour chaque réseau de destination(connu à partir de l’IP de la destination), quelle interface réseau on peut utiliser en lui associant également une métrique qui mesure la «distance» séparant le routeur du réseau de destination.</p>

<details class="plus"><summary>Afficher une table de routage</summary>
<ul>
<li>Sous Windows : <code>route print</code> ou <code>netsh int ipv4/ipv6 sh route</code></li>
<li>Sous Unix/OS X : <code>netstat -rn</code></li>
<li>Sous Linux : <code>ip -4/-6 route</code></li>
</ul>
<table class="table table-bordered table-hover">
<thead class="table-warning">
<tr class="header">
<th>Réseau destination (format CIDR)</th>
<th>Masque</th>
<th>Passerelle</th>
<th>Interface</th>
<th>Métrique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.0.0.0/0</td>
<td>0.0.0.0</td>
<td>192.168.0.1</td>
<td>192.168.0.100</td>
<td>1</td>
</tr>
<tr class="even">
<td>127.0.0.0/8</td>
<td>255.0.0.0</td>
<td>127.0.0.1</td>
<td>127.0.0.1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>192.168.0.0/24</td>
<td>255.255.255.0</td>
<td>192.168.0.100</td>
<td>192.168.0.100</td>
<td>1</td>
</tr>
<tr class="even">
<td>192.168.0.100/32</td>
<td>255.255.255.255</td>
<td>127.0.0.1</td>
<td>127.0.0.1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>192.168.0.1/32</td>
<td>255.255.255.255</td>
<td>192.168.0.100</td>
<td>192.168.0.100</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><a href="https://fr.wikipedia.org/wiki/Table_de_routage" class="cite-source">Article Wikipédia sur les tables de routage</a></p>
</details>

<p>Encore une fois, nous allons utiliser un exemple pour illustrer cette notion.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/table_routage_pixees.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Diagramme d’un réseau</figcaption><p></p>
</figure>
</div>
<p><a href="https://pixees.fr/informatiquelycee/n_site/nsi_term_archi_routage.html" class="cite-source">David Roche via pixees.fr CC-BY-SA</a></p>
<p>Ce réseau contient:</p>
<ul>
<li><p><strong>Trois réseaux locaux</strong>:</p>
<ul>
<li><strong>R1</strong> dont l’adresse est <code>172.168.0.0/16</code> avec trois machines M1 à M3.</li>
<li><strong>R2</strong> dont l’adresse est <code>10.0.0.0/8</code> avec trois machines M4 à M6.</li>
<li><strong>R3</strong> dont l’adresse est <code>172.169.0.0/16</code> avec deux machines M7 et M8.</li>
</ul></li>
<li><p><strong>Deux routeurs</strong>:</p>
<ul>
<li><strong>Routeur A</strong> qui possède 3 interfaces réseau que l’on nomme eth0, eth1 et eth2. Les adresses IP liées à ces interfaces réseau sont : 172.168.255.254/16 (eth0), 172.169.255.254/16 (eth2) et 192.168.7.1/24 (eth1).</li>
<li><strong>Routeur G</strong> qui possède 2 interfaces réseau que l’on nomme eth0 et eth1. Les adresses IP liées à ces interfaces réseau sont : 10.255.255.254/8 (eth0) et 192.168.7.2/24 (eth1).</li>
</ul></li>
</ul>
<p>Voici la table de routage simplifiée du routeur A:</p>
<table class="table table-bordered table-hover">
<tbody>
<tr class="odd">
<td><div class="highlight"><pre><span></span>Réseau
</pre></div>
</td>
<td>Moyen de l’atteindre(Passerelle ou _Gateway)</td>
<td>Métrique</td>
</tr>
<tr class="even">
<td>172.168.0.0/16</td>
<td>eth0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>192.168.7.2/24</td>
<td>eth1</td>
<td>0</td>
</tr>
<tr class="even">
<td>172.169.0.0/16</td>
<td>eth2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>10.0.0.0/8</td>
<td>192.168.7.2/24</td>
<td>1</td>
</tr>
</tbody>
</table>
<details class="appli"><summary>&nbsp;</summary>
<p>Établir la table de routage du routeur G.</p>
</details>

<blockquote class="blockquote">
<p>Comment un routeur arrive à remplir sa table de routage ? &nbsp; La réponse est simple pour les réseaux qui sont directement reliés au routeur (métrique = 0), mais comment cela se passe-t-il pour les autres réseaux (métrique supérieure à zéro) ? &nbsp; Il existe 2 méthodes : &nbsp; - le <strong>routage statique</strong> : chaque ligne doit être renseignée “à la main”. Cette solution est seulement envisageable pour des très petits réseaux de réseaux - le <strong>routage dynamique</strong> : tout se fait “automatiquement”, on utilise des protocoles qui vont permettre de “découvrir” les différentes routes automatiquement afin de pouvoir remplir la table de routage tout aussi automatiquement.</p>
</blockquote>
<p><a href="https://pixees.fr/informatiquelycee/n_site/nsi_term_archi_routage.html" class="cite-source">David Roche via pixees.fr CC-BY-SA</a></p>
<h2 id="les-protocoles-de-routage" class="anchored">Les protocoles de routage</h2>
<p>Nous allons étudier deux algorithmes de routage:</p>
<ul>
<li>RIP (<em>Routing Information Protocol</em>)</li>
<li>et OSPF (<em>Open Shortest Path First</em>).</li>
</ul>
<p>Voici le réseau sur lequel nous allons illustrer ces algorithmes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/pixees_rout_2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Exemple de réseau</figcaption><p></p>
</figure>
</div>
<p><a href="https://pixees.fr/informatiquelycee/n_site/nsi_term_archi_routage.html" class="cite-source">David Roche via pixees.fr CC-BY-SA</a></p>
<h3 id="le-protocole-rip" class="anchored">Le protocole <em>RIP</em></h3>
<p>C’était le premier protocole utilisé, il associe à chaque le nombre de sauts minimal, c’est-à-dire le nombre minimal de routeurs à traverser.</p>
<p><wc-wikimage title="Hop-count-trans.png" caption="En supposant un nombre de sauts d'origine 0. Le nombre de sauts entre les ordinateurs dans ce cas est de 2."></wc-wikimage></p>
<p>Au départ chaque routeur ne connait que les réseaux directement accessibles, avec une distance nulle.</p>
<p>Ensuite, toutes les 30 secondes, les réseaux envoient leurs tables de routages à <strong>leurs voisins directement accessibles</strong>, à la réception chaque routeur met à jour sa table de routage en associant à chaque destination la passerelle avec la plus courte distance en saut.</p>
<details class="appli"><summary>&nbsp;</summary>
<ol type="1">
<li><p>En vous basant sur le protocole <em>RIP</em> (métrique = nombre de sauts), déterminez la table de routage du routeur A</p></li>
<li><p>Quel est, d’après la table de routage construite ci-dessus, le chemin qui sera emprunté par un paquet pour aller d’une machine ayant pour adresse IP 172.18.1.1/16 à une machine ayant pour adresse IP 172.16.5.3/16 ?</p></li>
</ol>
</details>

<p>Ce protocole n’est plus utilisé, car sur de grands réseaux il provoque un trafic important, et de plus il possède des failles de sécurité rendant ces réseaux vulnérables à certaines attaques.</p>
<h3 id="le-protocole-ospf" class="anchored">Le protocole <em>OSPF</em></h3>
<p>Dans le protocole <em>OSPF</em>, <em>les routeurs ont une vision globale du réseau</em> et pas seulement de leurs voisins directs.</p>
<p>De plus, la <em>métrique</em> utilisée n’est plus le nombre de sauts, mais le coût de la liaison. Celui-ci tient compte du <strong>débit binaire de chaque liaison en bits par seconde</strong>.</p>
<p>On définit le coût par l’expression:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>c</mi><mi>o</mi><mover accent="true"><mi>u</mi><mo>^</mo></mover><mi>t</mi><mo>=</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mi>d</mi><mover accent="true"><mi>e</mi><mo>ˊ</mo></mover><mi>b</mi><mi>i</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>e</mi><mi>n</mi><mtext>&nbsp;</mtext><mi>M</mi><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
coût  = \frac{10^8}{débit\ en\ Mbit/s}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">co</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">u</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4271em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">e</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">ˊ</span></span></span></span></span></span></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace">&nbsp;</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span><span class="mord">/</span><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
</p>
<p>On peut représenter le réseau par un graphe dans laquelle les routeurs et les switchs sont des <em>noeuds</em> et les liaisons des arêtes étiquetées avec des coûts.</p>
<p>On applique alors l’<a href="https://fr.wikipedia.org/wiki/Algorithme_de_Dijkstra">algorithme de Djikistra</a> pour trouver le plus court chemin.</p>
<p><wc-wikimage class="half center" title="Dijkstra_Animation.gif" caption="L'algorithme de Dijkstra pour trouver le chemin le plus court entre a et b. Il choisit le sommet non visité avec la distance la plus faible, calcule la distance à travers lui à chaque voisin non visité, et met à jour la distance du voisin si elle est plus petite. Il marque le sommet visité (en rouge) lorsque il a terminé avec les voisins."></wc-wikimage></p>
<details class="appli"><summary>&nbsp;</summary>
<ol type="1">
<li><p>En vous basant sur le protocole OSPF (métrique = somme des coûts), déterminez la table de routage du routeur A.</p>
<p>On donne les débits suivants :</p>
<ul>
<li>liaison routeur A - routeur B : 1 Mbps</li>
<li>liaison routeur A - routeur C : 10 Mbps</li>
<li>liaison routeur C - routeur B : 10 Mbps</li>
</ul></li>
<li><p>Quel est, d’après la table de routage construite ci-dessus, le chemin qui sera emprunté par un paquet pour aller d’une machine ayant pour adresse IP 172.18.1.1/16 à une machine ayant pour adresse IP 172.16.5.3/16 ?</p></li>
</ol>
</details>

<div class="ref">
<ul>
<li><a href="https://pixees.fr/informatiquelycee/n_site/nsi_term_archi_routage.html">Protocoles de routage sur pixees.fr</a></li>
</ul>
</div>

