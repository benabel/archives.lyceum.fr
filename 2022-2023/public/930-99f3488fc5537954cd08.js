"use strict";(self.webpackChunkgatsby_lyceum_site=self.webpackChunkgatsby_lyceum_site||[]).push([[930],{2930:function(e,t,n){n.r(t),n.d(t,{WCwikimage:function(){return r}});var i=document.createElement("template");i.innerHTML='\n<style>\n  figure {\n    border: thin #c0c0c0 solid;\n    border-radius: 0.7em;\n  }\n\n  img {\n    border-radius: 0.7em 0.7em 0 0;\n    display: block;\n    width: 100%;\n  }\n\n  a {\n    color: var(--wc-color-anchor, #5f7974);\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: var(--wc-color-anchor-hover, #89acc7);\n    text-decoration: underline;\n  }\n\n  #caption {\n    background-color: #222;\n    color: #fff;\n    font: italic smaller sans-serif;\n    text-align: center;\n  }\n  \n  #credit {\n    background-color: rgba(255, 255, 255, 0.7);\n    border-radius: 0 0 0.7em 0.7em;\n    color: black;\n    font-size: 0.7em;\n    margin: 0 0.7em;\n    text-align: right;\n  }\n</style>\n<figure>\n  <img />\n  <figcaption id="caption"></figcaption>\n  <figcaption id="credit">\n    <a id="author"></a>&nbsp; <a id="licence"></a>&nbsp;\n    <a id="image-description">via Wikimedia Commons</a>\n  </figcaption>\n</figure>\n';var r=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.caption=""}static get observedAttributes(){return["title","caption"]}attributeChangedCallback(e,t,n){t!==n&&(this[e]=n)}get title(){return this.getAttribute("title")}set title(e){this.setAttribute("title",e)}get caption(){return this.getAttribute("caption")}set caption(e){this.setAttribute("caption",e)}async fetchData(e){let t=`Image:${e}`,n="https://commons.wikimedia.org/w/api.php",i={action:"query",format:"json",prop:"imageinfo",iiprop:"extmetadata",titles:t};n+="?origin=*",Object.keys(i).forEach((function(e){n+="&"+e+"="+i[e]}));let r=await fetch(n).then((function(e){return e.json()})).then((function(e){let t=e.query.pages;return t[Object.keys(t)[0]].imageinfo[0].extmetadata})).catch((function(e){console.error(e)})),a=await fetch(`https://api.wikimedia.org/core/v1/commons/file/${t}`).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error(e)}));return Object.assign(r,a)}async connectedCallback(){this.style.display="block";let e=await this.fetchData(this.title),t=i.content,n=t.querySelector("img");e.original.url.endsWith(".svg")?n.src=e.original.url:n.src=e.preferred.url,this.caption?n.alt=this.caption:e.ImageDescription?n.alt=e.ImageDescription.value:e.ObjectName?n.alt=e.ObjectName.value:n.alt="Image libre issue de Wikimedia commons",t.querySelector("#image-description").href=e.file_description_url;let r=t.querySelector("#licence");e.LicenseUrl&&e.LicenseUrl.value?r.href=e.LicenseUrl.value:e.License&&"pd"===e.License.value&&(r.href="https://fr.wikipedia.org/wiki/Domaine_public_(propri%C3%A9t%C3%A9_intellectuelle)"),r.innerHTML=e.LicenseShortName.value;let a=t.querySelector("#author");"true"===e.AttributionRequired.value?(a.innerHTML="&copy;&nbsp;",e.Attribution&&e.Attribution.value&&(a.innerHTML+=e.Attribution.value)):a.innerHTML="";let o=t.querySelector("#caption");this.caption?o.innerHTML=this.caption:o.innerHTML="",this.shadowRoot.appendChild(t.cloneNode(!0))}};customElements.define("wc-wikimage",r)}}]);
//# sourceMappingURL=930-99f3488fc5537954cd08.js.map