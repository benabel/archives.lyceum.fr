{"componentChunkName":"component---src-templates-exo-md-js","path":"/1g/nsi/8-algorithmique/5-algorithme-des-k-plus-proches-voisins/exo/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"classification-des-joueurs-du-top-14\" class=\"anchored\">Classification des joueurs du top 14</h2>\n<p>Vous allez travailler sur un tableau de données des joueurs de rugby du top-14 de la saison 2019-2020 issues de la page de la ligue nationale de rugby:</p>\n<p>https://www.lnr.fr/rugby-top-14/joueurs-rugby-top-14</p>\n<p>Votre travail consiste à attribuer un poste sur le terrain à un joueur à partir de son poids et de sa taille en utilisant l’<em>algorithme des k plus proches voisins</em>:</p>\n<ul>\n<li>Demi mêlée,</li>\n<li>Arrière,</li>\n<li>1ère ligne,</li>\n<li>…</li>\n</ul>\n<h3 id=\"lecture-des-données\" class=\"anchored\">Lecture des données</h3>\n<p>On commence par lire les données du fichier <a href=\"/2022-2023/77475ce4ddb923f7a0f1559ae9d1edfc/joueurs-top14.csv\"><code>joueurs-top14.csv</code></a> sous la forme d’un tableau de tableau.</p>\n<div class=\"cell\" data-execution_count=\"1\">\n<div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">csv</span>\n<span></span>\n<span class=\"c1\">## Lecture du fichier csv</span>\n<span class=\"c1\">## et stockage dans une liste de liste</span>\n<span class=\"c1\">## taille, le poids et le poste si non vide</span>\n<span class=\"n\">joueurs</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">'/2022-2023/77475ce4ddb923f7a0f1559ae9d1edfc/joueurs-top14.csv'</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"o\">=</span><span class=\"s2\">\"utf-8\"</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">csvfile</span><span class=\"p\">:</span>\n<span class=\"n\">    reader</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"o\">.</span><span class=\"n\">DictReader</span><span class=\"p\">(</span><span class=\"n\">csvfile</span><span class=\"p\">)</span>\n<span class=\"c1\">    # Itération sur les lignes</span>\n<span class=\"k\">    for</span> <span class=\"n\">ligne</span> <span class=\"ow\">in</span> <span class=\"n\">reader</span><span class=\"p\">:</span>\n<span class=\"n\">        taille</span> <span class=\"o\">=</span> <span class=\"n\">ligne</span><span class=\"p\">[</span><span class=\"s2\">\"taille(cm)\"</span><span class=\"p\">]</span>\n<span class=\"n\">        poids</span> <span class=\"o\">=</span> <span class=\"n\">ligne</span><span class=\"p\">[</span><span class=\"s2\">\"poids(kg)\"</span><span class=\"p\">]</span>\n<span class=\"n\">        poste</span> <span class=\"o\">=</span> <span class=\"n\">ligne</span><span class=\"p\">[</span><span class=\"s2\">\"poste\"</span><span class=\"p\">]</span>\n<span class=\"k\">        if</span> <span class=\"n\">taille</span> <span class=\"ow\">and</span> <span class=\"n\">poids</span> <span class=\"ow\">and</span> <span class=\"n\">poste</span><span class=\"p\">:</span>\n<span class=\"n\">            joueurs</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">taille</span><span class=\"p\">),</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">poids</span><span class=\"p\">),</span> <span class=\"n\">poste</span><span class=\"p\">])</span>\n<span></span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Nbre de joueurs:\"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">joueurs</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Premier joueur:\"</span><span class=\"p\">,</span> <span class=\"n\">joueurs</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Quatrième joueur:\"</span><span class=\"p\">,</span> <span class=\"n\">joueurs</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">])</span>\n</pre></div>\n<div class=\"cell-output cell-output-stdout\">\n<div class=\"highlight\"><pre><span></span>Nbre de joueurs: 239\nPremier joueur: [176, 85, 'Demi mêlée']\nQuatrième joueur: [180, 95, 'Centre']\n</pre></div>\n</div>\n</div>\n<h3 id=\"lister-les-postes\" class=\"anchored\">Lister les postes</h3>\n<p>Compléter le code suivant pour créer une liste des postes existants.</p>\n<div class=\"highlight\"><pre><span></span><span class=\"n\">postes</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">joueur</span> <span class=\"ow\">in</span> <span class=\"n\">joueurs</span><span class=\"p\">:</span>\n<span class=\"n\">    poste</span> <span class=\"o\">=</span> <span class=\"o\">...</span>\n<span class=\"k\">    if</span> <span class=\"n\">poste</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">postes</span><span class=\"p\">:</span>\n<span class=\"o\">        ...</span>\n<span class=\"c1\">        \n## tests</span>\n<span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">postes</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">10</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Si on choisissait au hasard on aurait une chance sur 10\"</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Soit 90</span><span class=\"si\">% d</span><span class=\"s2\">'erreurs\"</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">postes</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"s1\">'Demi mêlée'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Arrière'</span><span class=\"p\">,</span>\n<span class=\"s1\"> '1ère ligne'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Centre'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Ailier'</span><span class=\"p\">,</span>\n<span class=\"s1\"> '3e ligne'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Trois quart aile'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Trois quart centre'</span><span class=\"p\">,</span>\n<span class=\"s2\"> \"Demi d'ouverture\"</span><span class=\"p\">,</span>\n<span class=\"s1\"> '2e ligne'</span><span class=\"p\">]</span>\n</pre></div>\n<div class=\"cell\" data-tags=\"[&quot;correction&quot;]\" data-execution_count=\"2\">\n<div class=\"highlight\"><pre><span></span><span class=\"n\">postes</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">joueur</span> <span class=\"ow\">in</span> <span class=\"n\">joueurs</span><span class=\"p\">:</span>\n<span class=\"c1\">    # le poste est à l'indice 2</span>\n<span class=\"n\">    poste</span> <span class=\"o\">=</span> <span class=\"n\">joueur</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"k\">    if</span> <span class=\"n\">poste</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">postes</span><span class=\"p\">:</span>\n<span class=\"n\">        postes</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">poste</span><span class=\"p\">)</span>\n<span></span>\n<span class=\"c1\">## tests</span>\n<span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">postes</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">10</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Si on choisissait au hasard on aurait une chance sur 10\"</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Soit 90</span><span class=\"si\">% d</span><span class=\"s2\">'erreur\"</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">postes</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"s1\">'Demi mêlée'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Arrière'</span><span class=\"p\">,</span>\n<span class=\"s1\"> '1ère ligne'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Centre'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Ailier'</span><span class=\"p\">,</span>\n<span class=\"s1\"> '3e ligne'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Trois quart aile'</span><span class=\"p\">,</span>\n<span class=\"s1\"> 'Trois quart centre'</span><span class=\"p\">,</span>\n<span class=\"s2\"> \"Demi d'ouverture\"</span><span class=\"p\">,</span>\n<span class=\"s1\"> '2e ligne'</span><span class=\"p\">]</span>\n</pre></div>\n<div class=\"cell-output cell-output-stdout\">\n<div class=\"highlight\"><pre><span></span>Si on choisissait au hasard on aurait une chance sur 10\nSoit 90% d'erreur\n</pre></div>\n</div>\n</div>\n<h3 id=\"observation-des-postes-sur-un-graphique\" class=\"anchored\">Observation des postes sur un graphique</h3>\n<div class=\"cell\" data-execution_count=\"3\">\n<div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">matplotlib.pyplot</span> <span class=\"k\">as</span> <span class=\"nn\">plt</span>\n<span class=\"k\">def</span> <span class=\"nf\">tracé_graph</span><span class=\"p\">(</span><span class=\"n\">joueurs</span><span class=\"p\">):</span>\n<span class=\"k\">    for</span> <span class=\"n\">poste</span> <span class=\"ow\">in</span> <span class=\"n\">postes</span><span class=\"p\">:</span>\n<span class=\"c1\">        # poids des joueurs à ce poste</span>\n<span class=\"n\">        poids</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">joueur</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">joueur</span> <span class=\"ow\">in</span> <span class=\"n\">joueurs</span> <span class=\"k\">if</span> <span class=\"n\">joueur</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">==</span> <span class=\"n\">poste</span><span class=\"p\">]</span>\n<span class=\"c1\">        # taille des joueurs à ce poste</span>\n<span class=\"n\">        tailles</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">joueur</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">joueur</span> <span class=\"ow\">in</span> <span class=\"n\">joueurs</span> <span class=\"k\">if</span> <span class=\"n\">joueur</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">==</span><span class=\"n\">poste</span><span class=\"p\">]</span>\n<span class=\"n\">        plt</span><span class=\"o\">.</span><span class=\"n\">scatter</span><span class=\"p\">(</span><span class=\"n\">poids</span><span class=\"p\">,</span> <span class=\"n\">tailles</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"n\">poste</span><span class=\"p\">,</span> <span class=\"n\">alpha</span><span class=\"o\">=</span><span class=\"mf\">0.7</span><span class=\"p\">)</span>\n<span class=\"c1\">    # Annotations du graphique</span>\n<span class=\"n\">    plt</span><span class=\"o\">.</span><span class=\"n\">xlabel</span><span class=\"p\">(</span><span class=\"s2\">\"poids(kg)\"</span><span class=\"p\">)</span>\n<span class=\"n\">    plt</span><span class=\"o\">.</span><span class=\"n\">ylabel</span><span class=\"p\">(</span><span class=\"s2\">\"taille(cm)\"</span><span class=\"p\">)</span>\n<span class=\"n\">    plt</span><span class=\"o\">.</span><span class=\"n\">legend</span><span class=\"p\">()</span>\n<span class=\"n\">       \ntracé_graph</span><span class=\"p\">(</span><span class=\"n\">joueurs</span><span class=\"p\">)</span>\n</pre></div>\n<div class=\"cell-output cell-output-display\">\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACf0lEQVR42k2UW2/jNhBG/f9/UPteLNCX5qm7dp3Ysi1bSiRR4k2iRF14CjJxsCMMNODl8ONwyF0IAaM1rdQ0raIoHjweD4QQeO+ZpollnpPPXx7j0Xs6NxKWhcl72nFiGAZ2IWxIqTBaYHTD6+sbVVWxbRtxsdi/BJi3QDS3bozbluIlBCq/pL5mWVERGCeKtkV3AiNbTqczdV0nWIJuG3MI+AQJuGVhXpak8tYPlH5Bzgv7fkI+gVJJrDSYTpNdMvzkk4In9Bknhc4hjaFRir8+BNI57LpRTo6ut3HL4QuoE3R/2HO9XqmbJuUmbDPzNDAOA0523A5HrHN0xR3bCB5diRpH3l1FrWt2SimEaLFGMfSG2y0nz3Mul4yyKNlWT/AKIzSnlxf++/sfequQoqJvBXYZaaO6OKbX7O73O1opOqtodMvh1548v6G1whjJKCrs9YG7nilejwy6I28z3lWR0iBcw7rOXHTGh/pg1/c9bdum3ERb14V1hbnuWIs97fkH+u1I/zhh646+zDl8/MuxeyU3OS/FC9JJyqH83HJcpeu6b2C0vnrjfrhjqxJd3tHZmSq/0NU3svrIH5c/Ock3foqf2NmSqQzlFXawn6cc8ziOY4IJqxi6B74vuV7OGNERZs/cN+hZY72lHVsKW9CNHcab5NEiIymMQD+N9H4lqw3Oe0RR8mhlKtZoQ18zr3OK/erZwpY8xO+3kkpAYwyDi8CNU21hi/X36eErDd+TCQzLwO/2BH4rtNbyXjW0UtEPjrYSxMOKA+KBxX/0mOt4t62x37GUMnnsj3N2z1WeD0G0qDg+AjG/MY7tsdiPx2NS40aX2lMqhiGBnrfqf5kuMdpf8SvJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cell 4 output 1\" title=\"\" src=\"/2022-2023/static/0f370095433041ccc1394ad77c8c492e/fcda8/cell-4-output-1.png\" srcset=\"/2022-2023/static/0f370095433041ccc1394ad77c8c492e/12f09/cell-4-output-1.png 148w,\n/2022-2023/static/0f370095433041ccc1394ad77c8c492e/e4a3f/cell-4-output-1.png 295w,\n/2022-2023/static/0f370095433041ccc1394ad77c8c492e/fcda8/cell-4-output-1.png 590w,\n/2022-2023/static/0f370095433041ccc1394ad77c8c492e/efc66/cell-4-output-1.png 885w,\n/2022-2023/static/0f370095433041ccc1394ad77c8c492e/c83ae/cell-4-output-1.png 1180w,\n/2022-2023/static/0f370095433041ccc1394ad77c8c492e/1843f/cell-4-output-1.png 1186w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n</div>\n\n<h3 id=\"séparation-des-données-pour-le-test\" class=\"anchored\">Séparation des données pour le test</h3>\n<p>On divise les données en deux parties:</p>\n<ul>\n<li>entrainement: les 190 premiers joueurs</li>\n<li>test: les 49 derniers</li>\n</ul>\n<div class=\"cell\" data-execution_count=\"4\">\n<div class=\"highlight\"><pre><span></span><span class=\"n\">train</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">joueurs</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">190</span><span class=\"p\">)]</span>\n<span class=\"n\">test</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">joueurs</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">joueurs</span><span class=\"p\">))]</span>\n<span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">),</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">)</span>\n</pre></div></div>\n<div class=\"cell-output cell-output-display\" data-execution_count=\"4\">\n<div class=\"highlight\"><pre><span></span>(190, 49)\n</pre></div>\n</div>\n</div>\n<h3 id=\"implémentation-de-la-fonction-distance\" class=\"anchored\">Implémentation de la fonction distance</h3>\n<p>On mesure la distance Euclidienne entre deux joueurs sur le graphique grâce au théorème de Pythagore dans la fonction <code>def distance(j1, j2)</code>.</p>\n<div class=\"cell\" data-execution_count=\"5\">\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">distance</span><span class=\"p\">(</span><span class=\"n\">j1</span><span class=\"p\">,</span> <span class=\"n\">j2</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"calcule la distance euclidienne entre deux joueurs\"</span>\n<span class=\"n\">    x1</span><span class=\"p\">,</span> <span class=\"n\">y1</span><span class=\"p\">,</span> <span class=\"n\">p1</span> <span class=\"o\">=</span> <span class=\"n\">j1</span>\n<span class=\"n\">    x2</span><span class=\"p\">,</span> <span class=\"n\">y2</span><span class=\"p\">,</span> <span class=\"n\">p2</span> <span class=\"o\">=</span> <span class=\"n\">j2</span>\n<span class=\"k\">    return</span> <span class=\"p\">((</span><span class=\"n\">x2</span><span class=\"o\">-</span><span class=\"n\">x1</span><span class=\"p\">)</span><span class=\"o\">**</span><span class=\"mi\">2</span><span class=\"o\">+</span><span class=\"p\">(</span><span class=\"n\">y2</span><span class=\"o\">-</span><span class=\"n\">y1</span><span class=\"p\">)</span><span class=\"o\">**</span><span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"o\">**</span><span class=\"mf\">0.5</span>\n<span></span>\n<span class=\"c1\">## appel entre les deux premiers joueurs des jeux de données</span>\n<span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n</pre></div>\n<div class=\"cell-output cell-output-display\" data-execution_count=\"5\">\n<div class=\"highlight\"><pre><span></span>30.01666203960727\n</pre></div>\n</div>\n</div>\n<h3 id=\"algorithme-du-plus-proche-voisin\" class=\"anchored\">Algorithme du plus proche voisin</h3>\n<p>On commnce par écrire une fonction qui recherche dans les données d’entrainement(<code>train</code>) le joueur le plus proche du joueur de test d’indice <code>i</code>.</p>\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"Renvoie le poste du plus proche voisin dans train du joueur de test d'indice i\"</span>\n<span class=\"n\">    joueur_test</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span>\n<span class=\"c1\">    # on initialise l'indice et la distance minimum sur </span>\n<span class=\"c1\">    # la première donnée d'entraînement</span>\n<span class=\"n\">    j_mini</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">    d_mini</span> <span class=\"o\">=</span> <span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">joueur_test</span><span class=\"p\">,</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n<span class=\"c1\">    # on recherche le joueur avec la distance minimum</span>\n<span class=\"c1\">    # dans les données d'entrainement</span>\n<span class=\"k\">    for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">)):</span>\n<span class=\"n\">        d</span> <span class=\"o\">=</span> <span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">joueur_test</span><span class=\"p\">,</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"n\">j</span><span class=\"p\">])</span>\n<span class=\"o\">        ...</span>\n<span class=\"k\">        \n    return</span> <span class=\"o\">...</span>\n<span></span>\n<span class=\"nb\">\nprint</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 1e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 2e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 3e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision fausse pour le 4e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'Ailier'</span> \n</pre></div>\n<div class=\"cell\" data-tags=\"[&quot;correction&quot;]\" data-execution_count=\"6\">\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"Renvoie le poste du plus proche voisin dans train du joueur de test d'indice i\"</span>\n<span class=\"n\">    joueur_test</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span>\n<span class=\"c1\">    # on initialise la distance minimum sur </span>\n<span class=\"c1\">    # des données d'entraînement</span>\n<span class=\"n\">    j_mini</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">    d_mini</span> <span class=\"o\">=</span> <span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">joueur_test</span><span class=\"p\">,</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n<span class=\"k\">    for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">)):</span>\n<span class=\"c1\">        # on calcule la distance du joueur_test</span>\n<span class=\"c1\">        # avec le joueur d'indice j</span>\n<span class=\"n\">        d</span> <span class=\"o\">=</span> <span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">joueur_test</span><span class=\"p\">,</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"n\">j</span><span class=\"p\">])</span>\n<span class=\"k\">        if</span> <span class=\"n\">d</span> <span class=\"o\">&lt;</span> <span class=\"n\">d_mini</span><span class=\"p\">:</span>\n<span class=\"c1\">            # c'est le nouveau minimum</span>\n<span class=\"n\">            j_mini</span> <span class=\"o\">=</span> <span class=\"n\">j</span>\n<span class=\"n\">            d_mini</span> <span class=\"o\">=</span> <span class=\"n\">d</span>\n<span class=\"c1\">    # je renvoie le poste(indice 2) du </span>\n<span class=\"c1\">    # joueur étant à l'indice i_mini</span>\n<span class=\"k\">    return</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"n\">j_mini</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span></span>\n<span class=\"nb\">\nprint</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 1e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 2e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision juste pour le 3e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Prévision fausse pour le 4e joueur\"</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">))</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"k\">assert</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'Ailier'</span> \n</pre></div>\n<div class=\"cell-output cell-output-stdout\">\n<div class=\"highlight\"><pre><span></span>Prévision juste pour le 1e joueur [177, 115, '1ère ligne'] 1ère ligne\nPrévision juste pour le 2e joueur [182, 110, '1ère ligne'] 1ère ligne\nPrévision juste pour le 3e joueur [203, 120, '2e ligne'] 2e ligne\nPrévision fausse pour le 4e joueur [181, 100, 'Arrière'] Ailier\n</pre></div>\n</div>\n</div>\n<h3 id=\"calcul-du-taux-derreur\" class=\"anchored\">Calcul du taux d’erreur</h3>\n<p>Puisque l’algorithme commet des erreurs regardons combien il en fait et quel pourcentage cela représente.</p>\n<div class=\"highlight\"><pre><span></span><span class=\"n\">erreur</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"c1\">## compte le nb de fausses prédictions</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">)):</span>\n<span class=\"n\">    poste_predit</span> <span class=\"o\">=</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">)</span>\n<span class=\"n\">    poste_reel</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"k\">    if</span> <span class=\"o\">...</span><span class=\"p\">:</span>\n<span class=\"o\">        ...</span>\n<span></span>\n<span class=\"k\">assert</span> <span class=\"n\">erreur</span> <span class=\"o\">==</span> <span class=\"mi\">22</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">round</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"o\">*</span><span class=\"n\">erreur</span><span class=\"o\">/</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">),</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"s2\">\"</span><span class=\"si\">% d</span><span class=\"s2\">'erreur\"</span><span class=\"p\">)</span>  \n</pre></div>\n<div class=\"cell\" data-execution_count=\"7\">\n<div class=\"highlight\"><pre><span></span><span class=\"n\">erreur</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">)):</span>\n<span class=\"n\">    poste_predit</span> <span class=\"o\">=</span> <span class=\"n\">plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">)</span>\n<span class=\"n\">    poste_reel</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"k\">    if</span> <span class=\"n\">poste_predit</span> <span class=\"o\">!=</span> <span class=\"n\">poste_reel</span><span class=\"p\">:</span>\n<span class=\"n\">        erreur</span> <span class=\"o\">=</span> <span class=\"n\">erreur</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span></span>\n<span class=\"k\">assert</span> <span class=\"n\">erreur</span> <span class=\"o\">==</span> <span class=\"mi\">22</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">round</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"o\">*</span><span class=\"n\">erreur</span><span class=\"o\">/</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">),</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"s2\">\"</span><span class=\"si\">% d</span><span class=\"s2\">'erreur\"</span><span class=\"p\">)</span>     \n</pre></div>\n<div class=\"cell-output cell-output-stdout\">\n<div class=\"highlight\"><pre><span></span>44.9 % d'erreur\n</pre></div>\n</div>\n</div>\n<h3 id=\"algorithme-des-k-plus-proches-voisins\" class=\"anchored\">Algorithme des k plus proches voisins</h3>\n<p>Plutôt que de regarder le plus proche voisin, nous allons regarder les k plus proches voisins du joueur de test dans les données d’entrainement.</p>\n<p>Pour cela nous allons créer une liste des postes des plus proches voisins, puis grâce à la fonction suivante, nous en déduirons le poste le plus probable d’après ces voisins.</p>\n<div class=\"cell\" data-execution_count=\"8\">\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">occurence_max</span><span class=\"p\">(</span><span class=\"n\">tab</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"Renvoie la valeur qui a le plus d'occurences dans un tableau\"</span>\n<span class=\"n\">    dico</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">k</span><span class=\"p\">:</span> <span class=\"mi\">0</span> <span class=\"k\">for</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"n\">tab</span><span class=\"p\">}</span>\n<span class=\"k\">    for</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"n\">tab</span><span class=\"p\">:</span>\n<span class=\"n\">        dico</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">]</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n<span class=\"n\">    \n    maxi</span><span class=\"p\">,</span> <span class=\"n\">k_max</span> <span class=\"o\">=</span> <span class=\"mi\">0</span> <span class=\"p\">,</span> <span class=\"mi\">0</span>\n<span class=\"k\">    for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"n\">dico</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n<span class=\"k\">        if</span> <span class=\"n\">v</span> <span class=\"o\">&gt;</span> <span class=\"n\">maxi</span><span class=\"p\">:</span>\n<span class=\"n\">            maxi</span><span class=\"p\">,</span> <span class=\"n\">k_max</span> <span class=\"o\">=</span> <span class=\"n\">v</span> <span class=\"p\">,</span> <span class=\"n\">k</span>\n<span class=\"k\">    return</span> <span class=\"n\">k_max</span>\n<span></span>\n<span class=\"k\">assert</span> <span class=\"n\">occurence_max</span><span class=\"p\">([</span><span class=\"s2\">\"Ailier\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Ailier\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Pilier\"</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"s2\">\"Ailier\"</span>\n<span class=\"k\">assert</span> <span class=\"n\">occurence_max</span><span class=\"p\">([</span><span class=\"s2\">\"Ailier\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Pilier\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Ailier\"</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"s2\">\"Ailier\"</span>\n<span class=\"k\">assert</span> <span class=\"n\">occurence_max</span><span class=\"p\">([</span><span class=\"s2\">\"Pilier\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Ailier\"</span><span class=\"p\">,</span>  <span class=\"s2\">\"Pilier\"</span><span class=\"p\">,])</span> <span class=\"o\">==</span> <span class=\"s2\">\"Pilier\"</span>\n</pre></div>\n</div>\n<p>Il ne reste plus qu’à créer cette liste de poste des plus proches voisins dans la fonction suivante.</p>\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">k_plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">k</span><span class=\"p\">:</span><span class=\"nb\">int</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"Renvoie le poste d'après les k plus proches voisins du joueur de test d'indice i dans train\"</span>\n<span class=\"c1\">    # joueur dont on cherche le poste</span>\n<span class=\"n\">    joueur_test</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span>\n<span class=\"c1\">    # liste destinée à accueillir les postes des k plus proches voisins</span>\n<span class=\"n\">    postes_voisins</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">    for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">)):</span>\n<span class=\"o\">        ...</span>\n<span class=\"k\">    \n    return</span> <span class=\"n\">occurence_max</span><span class=\"p\">(</span><span class=\"n\">poste_voisins</span><span class=\"p\">)</span>\n<span></span>\n<span class=\"c1\">## En fonction de k la prévision n'est pas la même</span>\n<span class=\"k\">assert</span> <span class=\"n\">k_plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'Ailier'</span>\n<span class=\"k\">assert</span> <span class=\"n\">k_plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'1ère ligne'</span>\n</pre></div>\n<div class=\"cell\" data-tags=\"[&quot;correction&quot;]\" data-execution_count=\"9\">\n<div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">k_plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">k</span><span class=\"p\">:</span><span class=\"nb\">int</span><span class=\"p\">):</span>\n<span class=\"s2\">    \"Renvoie le poste d'après les k plus proches voisins du joueur de test d'indice i dans train\"</span>\n<span class=\"n\">    joueur_test</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span>\n<span class=\"c1\">    # on crée un tabelau avec toutes les distances et les indices</span>\n<span class=\"n\">    distances</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">    for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">)):</span>\n<span class=\"n\">        joueur</span> <span class=\"o\">=</span> <span class=\"n\">train</span><span class=\"p\">[</span><span class=\"n\">j</span><span class=\"p\">]</span>\n<span class=\"n\">        distances</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">((</span><span class=\"n\">distance</span><span class=\"p\">(</span><span class=\"n\">joueur</span><span class=\"p\">,</span> <span class=\"n\">joueur_test</span><span class=\"p\">),</span> <span class=\"n\">j</span><span class=\"p\">))</span>\n<span class=\"c1\">    # on tri la liste par distance</span>\n<span class=\"n\">    distances</span><span class=\"o\">.</span><span class=\"n\">sort</span><span class=\"p\">()</span>\n<span class=\"c1\">    # on ne garde que les k premiers</span>\n<span class=\"n\">    poste_voisins</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">train</span><span class=\"p\">[</span><span class=\"n\">distances</span><span class=\"p\">[</span><span class=\"n\">j</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">]][</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">)]</span>\n<span class=\"k\">    \n    return</span> <span class=\"n\">occurence_max</span><span class=\"p\">(</span><span class=\"n\">poste_voisins</span><span class=\"p\">)</span>\n<span></span>\n<span class=\"c1\">## En fonction de k la prévision n'est pas la même</span>\n<span class=\"k\">assert</span> <span class=\"n\">k_plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'Ailier'</span>\n<span class=\"k\">assert</span> <span class=\"n\">k_plus_proche</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'1ère ligne'</span>\n</pre></div>\n</div>\n<h3 id=\"recherche-de-la-meilleure-valeur-de-k\" class=\"anchored\">Recherche de la meilleure valeur de k</h3>\n<p>Nous allons tracer le taux d’erreur en fonction du nombre k de voisins choisis pour trouver la meilleure valeur de k possible.</p>\n<div class=\"cell\" data-execution_count=\"10\">\n<div class=\"highlight\"><pre><span></span><span class=\"n\">xs</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"n\">ys</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">train</span><span class=\"p\">)):</span>\n<span class=\"n\">    erreur</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"k\">    for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">)):</span>\n<span class=\"n\">        joueur_test</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span>\n<span class=\"k\">        if</span> <span class=\"n\">joueur_test</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">!=</span> <span class=\"n\">k_plus_proche</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"n\">k</span><span class=\"p\">):</span>\n<span class=\"n\">            erreur</span> <span class=\"o\">+=</span><span class=\"mi\">1</span>\n<span class=\"n\">    xs</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">)</span>\n<span class=\"n\">    ys</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">round</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"o\">*</span><span class=\"n\">erreur</span><span class=\"o\">/</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">),</span> <span class=\"mi\">1</span><span class=\"p\">))</span>\n<span class=\"n\">    \nplt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">xs</span><span class=\"p\">,</span> <span class=\"n\">ys</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">xlabel</span><span class=\"p\">(</span><span class=\"s1\">'k'</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">ylabel</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"si\">% d</span><span class=\"s2\">'erreur\"</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">title</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"Le meilleur résultat (</span><span class=\"si\">{</span><span class=\"nb\">min</span><span class=\"p\">(</span><span class=\"n\">ys</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s2\">% d'erreur) est obtenu avec </span><span class=\"si\">{</span><span class=\"n\">xs</span><span class=\"p\">[</span><span class=\"n\">ys</span><span class=\"o\">.</span><span class=\"n\">index</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"p\">(</span><span class=\"n\">ys</span><span class=\"p\">))]</span><span class=\"si\">}</span><span class=\"s2\"> voisins\"</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n</pre></div>\n<div class=\"cell-output cell-output-display\">\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABbUlEQVR42pWU626DMAyF+/7PtTfYj2ktohVjBRpuIYGEXDiTM8HaiZbWUnRC7HyynZDdNE0YhgF5niOKIhyPR6Rpiv1+jyRJcDqdFqVx/v5GHMdhfCVJ8FF8dDigbVvsvPcoyxLGGDjnYK290Zs1Z1EJhQsfUHYK7EprqSGE+ANSpls2GAcmdJhfR89zqvRpIHlLMcL6+3ELkDF2FzivSm3R9OPjCghI/dnKUI4WOVfwG1UEIGX3KEPrPM6twjMWgFmWrQLnz0qOqwdxF6iUQlWVUMZird9bB7F6KHVdhYYbN91k0ikLPlg8awHovEfb1KHpTW8Wp7YeGVeYgNeAPgAblELjUAjETMK6CR8ZDxf5t5//+zut6gKkHmrj8HZg+Mw7vKc8lPuqLcCu61DXDaTscWEMDe/A2wac8+Cjn560KApIKYPOD0rf9+GWkJ/mu+W+WRuuitY6lDCOI9zVA0EA2kC+WQlOSnsohuwHdrOVog9xkXQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cell 11 output 1\" title=\"\" src=\"/2022-2023/static/b82624635f68face5e1ab0e407de82c8/fcda8/cell-11-output-1.png\" srcset=\"/2022-2023/static/b82624635f68face5e1ab0e407de82c8/12f09/cell-11-output-1.png 148w,\n/2022-2023/static/b82624635f68face5e1ab0e407de82c8/e4a3f/cell-11-output-1.png 295w,\n/2022-2023/static/b82624635f68face5e1ab0e407de82c8/fcda8/cell-11-output-1.png 590w,\n/2022-2023/static/b82624635f68face5e1ab0e407de82c8/efc66/cell-11-output-1.png 885w,\n/2022-2023/static/b82624635f68face5e1ab0e407de82c8/5a3c9/cell-11-output-1.png 1169w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n</div>\n\n<h3 id=\"améliorations-possibles\" class=\"anchored\">Améliorations possibles</h3>\n<p>Comme les tailles des joueurs sont à peu près deux fois plus grandes que les poids, on accorde une plus grande importance à leur taille. On pourrait:</p>\n<ul>\n<li>Normaliser les tailles et poids.</li>\n<li>Utiliser l’IMC.</li>\n<li>Rechercher d’autres informations qui nous informeraient sur leurs qualités physiques telles que leur temps au 100 m …</li>\n</ul>","frontmatter":{"tocHTML":"<ul><li><a href=\"#classification-des-joueurs-du-top-14\" data-localhref=\"true\">Classification des joueurs du top 14</a></li><ul><li><a href=\"#lecture-des-données\" data-localhref=\"true\">Lecture des données</a></li><li><a href=\"#lister-les-postes\" data-localhref=\"true\">Lister les postes</a></li><li><a href=\"#observation-des-postes-sur-un-graphique\" data-localhref=\"true\">Observation des postes sur un graphique</a></li><li><a href=\"#séparation-des-données-pour-le-test\" data-localhref=\"true\">Séparation des données pour le test</a></li><li><a href=\"#implémentation-de-la-fonction-distance\" data-localhref=\"true\">Implémentation de la fonction distance</a></li><li><a href=\"#algorithme-du-plus-proche-voisin\" data-localhref=\"true\">Algorithme du plus proche voisin</a></li><li><a href=\"#calcul-du-taux-derreur\" data-localhref=\"true\">Calcul du taux d’erreur</a></li><li><a href=\"#algorithme-des-k-plus-proches-voisins\" data-localhref=\"true\">Algorithme des k plus proches voisins</a></li><li><a href=\"#recherche-de-la-meilleure-valeur-de-k\" data-localhref=\"true\">Recherche de la meilleure valeur de k</a></li><li><a href=\"#améliorations-possibles\" data-localhref=\"true\">Améliorations possibles</a></li></ul></ul>"},"fields":{"classe":"1g","chapter":"Algorithme des k plus proches voisins","matter":"nsi","nChapter":"5","part":"Algorithmique","nPart":"8","type":"exo"}}},"pageContext":{"slug":"1g/nsi/8-algorithmique/5-algorithme-des-k-plus-proches-voisins/exo"}},"staticQueryHashes":["604483588"],"slicesMap":{}}